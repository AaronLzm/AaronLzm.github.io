---
title: 正性假设(Positivity Assumption) 是什么？
category: Causal inference
tags: [Chapter 2,What-if book reading notes]

---
**正性假设（Positivity Assumption）** 是因果推断中的核心假设之一，也称为 **重叠假设（Overlap Assumption）** 或 **共同支持假设（Common Support Assumption）**。其定义和重要性如下：

---

### **定义**
正性假设要求：**在每一个协变量 \(L = l\) 的组合下，所有可能的治疗 \(A = a\) 都有非零的分配概率**。形式化表述为：
\[
\text{Pr}[A = a \mid L = l] > 0 \quad \text{对所有} \quad a \text{ 和所有满足} \ \text{Pr}[L = l] > 0 \ \text{的} \ l.
\]

---

### **直观解释**
1. **无“不可能”的治疗组**：  
   对于协变量 \(L\) 的任何取值（例如，年龄>80岁、病情危重），每个治疗选项（如手术/药物）都必须有实际应用的记录。  
   - ✅ 合法：年轻组（\(L=0\)）中，50%手术（\(A=1\)）、50%药物（\(A=0\)）。  
   - ❌ 违背：老年组（\(L=1\)）中，所有患者均未手术（\(\text{Pr}[A=1|L=1]=0\)）→ 无法估计手术在该组的因果效应。

2. **数据必须覆盖所有场景**：  
   协变量 \(L\) 的每个子群体中，需同时存在接受治疗和未治疗的个体（如图示）：  
   | 病情严重度（\(L\)） | 治疗（\(A=1\)） | 未治疗（\(A=0\)） |  
   |-------------------|---------------|-----------------|  
   | 非危重（\(L=0\)） | 4人           | 4人             |  
   | 危重（\(L=1\)）   | 9人           | 3人             | → **满足正性**  

---

### **为什么必须满足？**
若正性被违背，因果效应无法识别：
1. **标准化（Standardization）失效**：  
   若某层 \(L=l\) 中无人接受治疗（如 \(\text{Pr}[A=1|L=l]=0\)），则反事实风险 \(\text{Pr}[Y^{a=1}=1 \mid L=l]\) 无法计算（因无观测数据）。
   
2. **逆概率加权（IPW）失效**：  
   权重 \(W^A = 1/\text{Pr}[A|L]\) 在 \(\text{Pr}[A|L]=0\) 时趋于无穷大 → 伪总体无法构建。

---

### **实际中的挑战**
1. **结构性违背**：  
   某些群体天然无法接受特定治疗（如晚期患者被排除手术）。  
   → **解决方案**：明确因果问题（如仅估计“适合手术者”的效应）。

2. **随机性违背**：  
   小样本中，某些 \(L\) 层可能巧合缺乏治疗变异（如100人中仅有1名高龄患者且未手术）。  
   → **解决方案**：  
     - 使用倾向得分截断（Trimming）或分层（Stratification）。  
     - 扩大样本量。

---

### **与其他假设的关系**
正性假设需与以下假设**同时成立**，才能识别因果效应：
1. **条件交换性（Exchangeability）**：\(Y^a \perp\!\!\!\perp A \mid L\)  
2. **一致性（Consistency）**：\(A = a \implies Y = Y^a\)  
3. **无测量误差**（隐含假设）

---

### **章节中的实例**
在**条件随机化实验**（表2.2）中：  
- 非危重组（\(L=0\)）：\(\text{Pr}[A=1|L=0] = 0.5 > 0\)  
- 危重组（\(L=1\)）：\(\text{Pr}[A=1|L=1] = 0.75 > 0\)  
→ **正性成立**，故标准化和IPW能计算总体因果效应（风险比=1）。

> ⚠️ 若危重组永远不治疗（\(\text{Pr}[A=1|L=1]=0\)），则无法回答“若全体接受治疗会如何”。

---

**正性假设的本质**是要求数据必须提供足够信息，以模拟所有反事实场景。它是连接观测数据与因果问题的桥梁之一。