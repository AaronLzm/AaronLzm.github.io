import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,a as e,f as r,w as p,r as m,b as o,g as l,d as s}from"./app-CHcUs86b.js";const g={};function c(h,a){const n=m("think");return o(),i("div",null,[e(n,null,{default:p(()=>[...a[0]||(a[0]=[l(" 我们正在处理《因果推断：What If》第6章的内容。这一章主要介绍了因果效应的图形表示方法，特别是因果图（Causal Diagrams）的概念和应用。以下是本章的详细总结，严格按照章节结构组织，包括所有技术重点和细节要点，并保留必要的英文术语以确保准确性。 ",-1),s("h3",{id:"第6章-因果效应的图形表示",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#第6章-因果效应的图形表示"},[s("span",null,"第6章：因果效应的图形表示")])],-1),s("h4",{id:"_6-1-因果图-causal-diagrams",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-1-因果图-causal-diagrams"},[s("span",null,"6.1 因果图（Causal Diagrams）")])],-1),s("ul",null,[s("li",null,[s("strong",null,"核心概念"),l("：因果图是一种有向无环图（Directed Acyclic Graph, DAG），用于表示变量间的因果关系。")]),s("li",null,[s("strong",null,"节点（Nodes）"),l("：代表随机变量（如治疗A、结果Y、协变量L）。")]),s("li",null,[s("strong",null,"边（Edges）"),l("：箭头表示直接因果效应（从原因指向结果）。例如，图6.1中： "),s("ul",null,[s("li",null,"L → A 表示疾病严重程度（L）影响心脏移植（A）的概率。"),s("li",null,"A → Y 表示心脏移植（A）影响死亡（Y）的风险。"),s("li",null,"L → Y 表示疾病严重程度（L）直接影响死亡（Y）的风险。")])]),s("li",null,[s("strong",null,"关键特性"),l("： "),s("ul",null,[s("li",null,[s("strong",null,"有向性（Directed）"),l("：箭头方向表示因果方向（如L→A表示L可能导致A，但反之不成立）。")]),s("li",null,[s("strong",null,"无环性（Acyclic）"),l("：图中无循环路径（即变量不能直接或间接导致自身）。")])])]),s("li",null,[s("strong",null,"因果DAG的正式定义"),l("（Technical Point 6.1）： "),s("ul",null,[s("li",null,[l("一个因果DAG需满足： "),s("ol",null,[s("li",null,"缺失箭头表示无直接因果效应（相对图中其他变量）。"),s("li",null,"所有变量对的共同原因（即使未测量）均包含在图中。"),s("li",null,"任何变量是其后代的因。")])]),s("li",null,[s("strong",null,"因果马尔可夫假设（Causal Markov Assumption）"),l("：给定其直接原因（父节点），变量独立于其非后代变量。数学上，联合密度满足马尔可夫分解："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"f"),s("mo",{stretchy:"false"},"("),s("mi",null,"v"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("munderover",null,[s("mo",null,"∏"),s("mrow",null,[s("mi",null,"j"),s("mo",null,"="),s("mn",null,"1")]),s("mi",null,"M")]),s("mi",null,"f"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"v"),s("mi",null,"j")]),s("mi",{mathvariant:"normal"},"∣"),s("msub",null,[s("mtext",null,"pa"),s("mi",null,"j")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"f(v) = \\prod_{j=1}^{M} f(v_j | \\text{pa}_j) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"3.2421em","vertical-align":"-1.4138em"}}),s("span",{class:"mop op-limits"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.8283em"}},[s("span",{style:{top:"-1.8723em","margin-left":"0em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"1")])])]),s("span",{style:{top:"-3.05em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",null,[s("span",{class:"mop op-symbol large-op"},"∏")])]),s("span",{style:{top:"-4.3em","margin-left":"0em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.10903em"}},"M")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.4138em"}},[s("span")])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mord"},"∣"),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord"},"pa")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2175em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3802em"}},[s("span")])])])])]),s("span",{class:"mclose"},")")])])])])]),l(" 其中 (\\text{pa}_j) 是 (V_j) 的父节点集合。")])])]),s("li",null,[s("strong",null,"应用场景"),l("： "),s("ul",null,[s("li",null,"图6.1：表示条件随机实验（如A的概率依赖于L）或观察性研究（假设L是A和Y的唯一共同原因）。"),s("li",null,"图6.2：表示边际随机实验（A的分配与L无关）。")])])],-1),s("h4",{id:"_6-2-因果图与边际独立性",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-2-因果图与边际独立性"},[s("span",null,"6.2 因果图与边际独立性")])],-1),s("ul",null,[s("li",null,[s("strong",null,"关联的来源"),l("：两个变量A和Y在以下情况会边际关联： "),s("ol",null,[s("li",null,[s("strong",null,"直接因果效应"),l("：A导致Y（图6.2）。")]),s("li",null,[s("strong",null,"共同原因"),l("：A和Y共享共同原因L（图6.3）。")])])]),s("li",null,[s("strong",null,"碰撞点（Collider）阻塞关联"),l("：若A和Y有共同效应L（路径A→L←Y），则A和Y边际独立（图6.4）。例如： "),s("ul",null,[s("li",null,"单倍型A与吸烟Y均导致心脏病L，但A与Y无直接关联。")])]),s("li",null,[s("strong",null,"图形规则"),l("：路径开放的条件（见Fine Point 6.1）： "),s("ul",null,[s("li",null,"无碰撞点（非碰撞点）的路径允许关联流动。"),s("li",null,"碰撞点（如L在A→L←Y中）会阻塞路径，除非对碰撞点或其后代进行条件调整。")])])],-1),s("h4",{id:"_6-3-因果图与条件独立性",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-3-因果图与条件独立性"},[s("span",null,"6.3 因果图与条件独立性")])],-1),s("ul",null,[s("li",null,[s("strong",null,"条件独立性的图形规则"),l("： "),s("ul",null,[s("li",null,[s("strong",null,"中介变量"),l("：若A通过B影响Y（A→B→Y），则条件化B会阻断A与Y的关联（图6.5），即 (A \\perp!!!\\perp Y | B)。")]),s("li",null,[s("strong",null,"共同原因"),l("：若L是A和Y的共同原因（A←L→Y），则条件化L会阻断关联（图6.6），即 (A \\perp!!!\\perp Y | L)。")]),s("li",null,[s("strong",null,"共同效应（碰撞点）"),l("：条件化碰撞点L（A→L←Y）或其后代C会打开路径，导致A与Y条件关联（图6.7-6.8）。")])])]),s("li",null,[s("strong",null,"d-分离（d-separation）"),l("（Fine Point 6.1）： "),s("ul",null,[s("li",null,[l("路径被阻断的条件： "),s("ol",null,[s("li",null,"路径包含非碰撞点且被条件化。"),s("li",null,"路径包含未条件化且无后代被条件化的碰撞点。")])]),s("li",null,"若所有路径被阻断，则变量条件独立（d-分离）。")])])],-1),s("h4",{id:"_6-4-正性与一致性在因果图中",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-4-正性与一致性在因果图中"},[s("span",null,"6.4 正性与一致性在因果图中")])],-1),s("ul",null,[s("li",null,[s("strong",null,"正性（Positivity）"),l("：图中通常隐含正性（除非治疗A是预处理变量L的确定性函数，此时用粗箭头L→A表示）。")]),s("li",null,[s("strong",null,"一致性（Consistency）"),l("：治疗节点A的干预需明确定义（箭头A→Y对应明确的干预）。")]),s("li",null,[s("strong",null,"治疗节点的特殊性"),l("：与其他节点不同，治疗节点需对应充分定义的干预（如“减肥”需明确干预方式，图6.10）。")])],-1),s("h4",{id:"_6-5-偏倚的结构分类",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-5-偏倚的结构分类"},[s("span",null,"6.5 偏倚的结构分类")])],-1),s("ul",null,[s("li",null,[s("strong",null,"系统偏倚（Systematic Bias）"),l("：在无限样本下仍存在的偏倚，源于非因果关联。")]),s("li",null,[s("strong",null,"偏倚来源"),l("： "),s("ol",null,[s("li",null,[s("strong",null,"混杂（Confounding）"),l("：治疗与结果有共同原因（如L在图6.1中导致A与Y关联）。")]),s("li",null,[s("strong",null,"选择偏倚（Selection Bias）"),l("：条件化共同效应（如碰撞点L在图6.7中引入关联）。")]),s("li",null,[s("strong",null,"测量偏倚（Measurement Bias）"),l("：变量测量误差（第9章详述）。")])])]),s("li",null,[s("strong",null,"零偏倚（Bias Under the Null）"),l("：即使无因果效应（如 (Pr[Y^a=1] = Pr[Y^{a'}=1])），关联仍存在（如表3.1中关联风险比≠1）。")])],-1),s("h4",{id:"_6-6-效应修饰的结构",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_6-6-效应修饰的结构"},[s("span",null,"6.6 效应修饰的结构")])],-1),s("ul",null,[s("li",null,[s("strong",null,"效应修饰（Effect Modification）"),l("：因果图不直接表示效应修饰的异质性（如方向或强度变化）。")]),s("li",null,[s("strong",null,"类型"),l("： "),s("ul",null,[s("li",null,[s("strong",null,"因果效应修饰"),l("：变量V直接影响Y（图6.12），且修饰A对Y的效应。")]),s("li",null,[s("strong",null,"代理效应修饰"),l("：变量S与V关联（通过共同原因、共同效应或因果路径，图6.14-6.16），但本身不直接影响Y。")])])]),s("li",null,[s("strong",null,"图形限制"),l("：标准DAG不区分效应修饰的定性类型（如定性修饰或仅部分层有效应）。")])],-1),s("h3",{id:"结论",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#结论"},[s("span",null,"结论")])],-1),s("ul",null,[s("li",null,[s("strong",null,"因果图的作用"),l("：直观表示因果假设，辅助识别关联来源（因果、混杂、选择偏倚），并指导数据分析（如选择调整变量）。")]),s("li",null,[s("strong",null,"与反事实理论的联系"),l("：因果图对应潜在结果模型（如NPSEM-IE或FFRCISTG，见Technical Point 6.2-6.3），SWIG图（第7章）将统一两者。")]),s("li",null,[s("strong",null,"关键局限"),l("：不直接编码正性、效应修饰异质性，且需谨慎定义治疗干预。")])],-1),s("h3",{id:"数学公式",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#数学公式"},[s("span",null,"数学公式")])],-1),s("ul",null,[s("li",null,[s("strong",null,"马尔可夫分解"),l("："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"f"),s("mo",{stretchy:"false"},"("),s("mi",null,"v"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("munderover",null,[s("mo",null,"∏"),s("mrow",null,[s("mi",null,"j"),s("mo",null,"="),s("mn",null,"1")]),s("mi",null,"M")]),s("mi",null,"f"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"v"),s("mi",null,"j")]),s("mi",{mathvariant:"normal"},"∣"),s("msub",null,[s("mtext",null,"pa"),s("mi",null,"j")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"f(v) = \\prod_{j=1}^{M} f(v_j | \\text{pa}_j) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"3.2421em","vertical-align":"-1.4138em"}}),s("span",{class:"mop op-limits"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.8283em"}},[s("span",{style:{top:"-1.8723em","margin-left":"0em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"1")])])]),s("span",{style:{top:"-3.05em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",null,[s("span",{class:"mop op-symbol large-op"},"∏")])]),s("span",{style:{top:"-4.3em","margin-left":"0em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.10903em"}},"M")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.4138em"}},[s("span")])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0359em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mord"},"∣"),s("span",{class:"mord"},[s("span",{class:"mord text"},[s("span",{class:"mord"},"pa")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2175em"}},[s("span",{style:{top:"-2.4559em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05724em"}},"j")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3802em"}},[s("span")])])])])]),s("span",{class:"mclose"},")")])])])])])]),s("li",null,[s("strong",null,"d-分离规则"),l("：见Fine Point 6.1的4条规则。")])],-1),s("p",null,"本章为后续讨论混杂（第7章）、选择偏倚（第8章）和测量偏倚（第9章）奠定基础。",-1)])]),_:1}),a[1]||(a[1]=r(' ### 第6章：因果效应的图形表示 **核心目标**：引入因果图（Causal Diagrams）作为工具，直观表示因果结构和假设，解决复杂场景中的因果推断问题。 <hr><h4 id="_6-1-因果图-causal-diagrams-1" tabindex="-1"><a class="header-anchor" href="#_6-1-因果图-causal-diagrams-1"><span><strong>6.1 因果图（Causal Diagrams）</strong></span></a></h4><p><strong>技术重点</strong>：</p><ol><li><p><strong>定义与结构</strong>：</p><ul><li><strong>因果图</strong>是有向无环图（Directed Acyclic Graph, DAG），节点（Nodes）表示随机变量（如治疗 (A)、结局 (Y)、协变量 (L)），边（Edges）表示直接因果效应。</li><li><strong>关键特性</strong>： <ul><li><em>有向性</em>：箭头方向表示因果方向（如 (L \\to A) 表示 (L) 可能引起 (A)）。</li><li><em>无环性</em>：无循环路径（变量不能直接或间接导致自身）。</li></ul></li><li><strong>示例</strong>（图6.1）： <ul><li>变量：(L)（疾病严重程度）、(A)（心脏移植）、(Y)（死亡）。</li><li>路径：(L \\to A)（疾病影响移植概率），(A \\to Y)（移植影响死亡），(L \\to Y)（疾病直接影响死亡）。</li></ul></li></ul></li><li><p><strong>因果DAG的正式定义</strong>（Technical Point 6.1）：</p><ul><li><strong>因果马尔可夫假设（Causal Markov Assumption）</strong>：给定直接原因（父节点），变量独立于其非后代。</li><li><strong>联合密度分解</strong>：<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo><mo>=</mo><munderover><mo>∏</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><mi>f</mi><mo stretchy="false">(</mo><msub><mi>v</mi><mi>j</mi></msub><mi mathvariant="normal">∣</mi><msub><mtext>pa</mtext><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(v) = \\prod_{j=1}^{M} f(v_j | \\text{pa}_j) </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.2421em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8283em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∏</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord text"><span class="mord">pa</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2175em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3802em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p> 其中 (\\text{pa}_j) 是 (V_j) 的父节点集合。</li><li><strong>因果DAG三条件</strong>： <ol><li>缺失箭头 (\\Rightarrow) 无直接因果效应。</li><li>所有共同原因（含未测量变量）需包含在图中。</li><li>变量是其后代的因。</li></ol></li></ul></li><li><p><strong>应用场景</strong>：</p><ul><li><strong>观察性研究</strong>（图6.1）：需假设 (L) 是 (A) 和 (Y) 的唯一共同原因（对应条件可交换性 (Y^a \\perp!!!\\perp A \\mid L)）。</li><li><strong>随机实验</strong>（图6.2）：若 (A) 的分配与 (L) 无关（边际随机），则无需包含 (L)。</li></ul></li></ol><hr><h4 id="_6-2-因果图与边际独立性-1" tabindex="-1"><a class="header-anchor" href="#_6-2-因果图与边际独立性-1"><span><strong>6.2 因果图与边际独立性</strong></span></a></h4><p><strong>技术重点</strong>：</p><ol><li><p><strong>关联来源</strong>：</p><ul><li><strong>直接因果</strong>：(A \\to Y) 导致关联（图6.2）。</li><li><strong>共同原因</strong>：(A \\leftarrow L \\to Y) 导致关联（图6.3）。</li><li><strong>共同效应（碰撞点 Collider）</strong>：路径 (A \\to L \\leftarrow Y) 被阻塞，(A) 与 (Y) 边际独立（图6.4）。</li></ul></li><li><p><strong>图形规则</strong>：</p><ul><li><strong>路径开放条件</strong>：无碰撞点或碰撞点未被条件化。</li><li><strong>示例</strong>： <ul><li>吸烟（(L)）是携带打火机（(A)）和肺癌（(Y)）的共同原因 (\\Rightarrow A) 与 (Y) 关联。</li><li>单倍型（(A)）与吸烟（(Y)）共同导致心脏病（(L)，碰撞点）(\\Rightarrow A) 与 (Y) 独立。</li></ul></li></ul></li></ol><hr><h4 id="_6-3-因果图与条件独立性-1" tabindex="-1"><a class="header-anchor" href="#_6-3-因果图与条件独立性-1"><span><strong>6.3 因果图与条件独立性</strong></span></a></h4><p><strong>技术重点</strong>：</p><ol><li><p><strong>条件化影响</strong>：</p><ul><li><strong>中介变量</strong>：条件化 (B)（如血小板聚集）阻断路径 (A \\to B \\to Y)，导致 (A \\perp!!!\\perp Y \\mid B)（图6.5）。</li><li><strong>共同原因</strong>：条件化 (L)（如吸烟）阻断 (A \\leftarrow L \\to Y)，导致 (A \\perp!!!\\perp Y \\mid L)（图6.6）。</li><li><strong>碰撞点</strong>：条件化 (L)（如心脏病）打开路径 (A \\to L \\leftarrow Y)，导致 (A) 与 (Y) 条件关联（图6.7）。</li></ul></li><li><p><strong>d-分离规则</strong>（Fine Point 6.1）：</p><ul><li><strong>路径阻断条件</strong>： <ol><li>含非碰撞点且被条件化。</li><li>含未条件化且无后代被条件化的碰撞点。</li></ol></li><li><strong>定理</strong>：若 (A) 与 (Y) d-分离给定 (C)，则 (A \\perp!!!\\perp Y \\mid C)（需因果马尔可夫假设）。</li></ul></li></ol><hr><h4 id="_6-4-正性与一致性在因果图中-1" tabindex="-1"><a class="header-anchor" href="#_6-4-正性与一致性在因果图中-1"><span><strong>6.4 正性与一致性在因果图中</strong></span></a></h4><p><strong>技术重点</strong>：</p><ol><li><strong>隐含假设</strong>： <ul><li><strong>正性（Positivity）</strong>：图中默认成立（除非箭头 (L \\to A) 为粗体，表示 (A) 是 (L) 的确定性函数）。</li><li><strong>一致性（Consistency）</strong>：治疗节点 (A) 需对应明确定义的干预（如“减肥”需指定具体方式，图6.10）。</li></ul></li><li><strong>治疗节点的特殊性</strong>： <ul><li>与其他节点区分，需确保干预的明确性（如“肥胖”不宜作为治疗节点）。</li></ul></li></ol><hr><h4 id="_6-5-偏倚的结构分类-1" tabindex="-1"><a class="header-anchor" href="#_6-5-偏倚的结构分类-1"><span><strong>6.5 偏倚的结构分类</strong></span></a></h4><p><strong>技术重点</strong>：</p><ol><li><strong>系统偏倚（Systematic Bias）</strong>： <ul><li><strong>来源</strong>： <ul><li><strong>混杂（Confounding）</strong>：共同原因导致关联（如 (L) 影响 (A) 和 (Y)）。</li><li><strong>选择偏倚（Selection Bias）</strong>：条件化共同效应（碰撞点）引入关联。</li><li><strong>测量偏倚（Measurement Bias）</strong>：变量误差（第9章）。</li></ul></li><li><strong>零偏倚（Bias Under the Null）</strong>：即使无因果效应（(Pr[Y^{a=1}] = Pr[Y^{a=0}])），仍存在关联（如表3.1）。</li></ul></li></ol><hr><h4 id="_6-6-效应修饰的结构-1" tabindex="-1"><a class="header-anchor" href="#_6-6-效应修饰的结构-1"><span><strong>6.6 效应修饰的结构</strong></span></a></h4><p><strong>技术重点</strong>：</p><ol><li><strong>效应修饰类型</strong>： <ul><li><strong>因果效应修饰</strong>：变量 (V)（如医疗质量）直接影响 (Y) 且修饰 (A) 的效应（图6.12）。</li><li><strong>代理效应修饰</strong>：变量 (S)（如治疗成本）与 (V) 关联，但本身不影响 (Y)（图6.14）。</li></ul></li><li><strong>图形局限性</strong>： <ul><li>DAG不区分效应修饰的异质性（如效应方向或是否存在效应）。</li><li>代理修饰可通过共同原因（图6.15）或条件化（图6.16）关联真实修饰因子。</li></ul></li></ol><hr><h3 id="结论-1" tabindex="-1"><a class="header-anchor" href="#结论-1"><span><strong>结论</strong></span></a></h3><ol><li><strong>因果图的核心作用</strong>： <ul><li>将因果假设可视化，辅助识别关联来源（直接因果、混杂、选择偏倚）。</li><li>通过d-分离规则推导条件独立性，指导数据分析（如选择调整变量）。</li></ul></li><li><strong>与反事实理论的联系</strong>： <ul><li>因果图对应潜在结果模型（如NPSEM-IE或FFRCISTG，见Technical Point 6.2–6.3）。</li><li>SWIG图（第7章）将统一图形与反事实框架。</li></ul></li><li><strong>关键局限</strong>： <ul><li>未直接编码正性、效应修饰异质性。</li><li>治疗节点需明确定义干预，避免模糊性（如“减肥”需指定方式）。</li></ul></li></ol><blockquote><p><strong>下一步</strong>：第7章将深入讨论混杂偏倚的图形识别与调整方法。</p></blockquote>',29))])}const y=t(g,[["render",c]]),v=JSON.parse(`{"path":"/posts/Causal%20inference/What-if%20book%20reading%20notes/response_md/DeepSeek-R1-0528-1st/Chapter_6.html","title":"Chapter_6","lang":"en-US","frontmatter":{"title":"Chapter_6","category":"Causal inference","tags":["DeepSeek-R1-0528-1st","response_md"],"description":"### 第6章：因果效应的图形表示 **核心目标**：引入因果图（Causal Diagrams）作为工具，直观表示因果结构和假设，解决复杂场景中的因果推断问题。 6.1 因果图（Causal Diagrams） 技术重点： 定义与结构： 因果图是有向无环图（Directed Acyclic Graph, DAG），节点（Nodes）表示随机变量（如治...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Chapter_6\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-17T03:19:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Aaron L\\",\\"url\\":\\"https://aaronlzm.github.io\\",\\"email\\":\\"lzm_aaron@outlook.com\\"}]}"],["meta",{"property":"og:url","content":"https://aaronlzm.github.io/posts/Causal%20inference/What-if%20book%20reading%20notes/response_md/DeepSeek-R1-0528-1st/Chapter_6.html"}],["meta",{"property":"og:site_name","content":"Aaron's Blog"}],["meta",{"property":"og:title","content":"Chapter_6"}],["meta",{"property":"og:description","content":"### 第6章：因果效应的图形表示 **核心目标**：引入因果图（Causal Diagrams）作为工具，直观表示因果结构和假设，解决复杂场景中的因果推断问题。 6.1 因果图（Causal Diagrams） 技术重点： 定义与结构： 因果图是有向无环图（Directed Acyclic Graph, DAG），节点（Nodes）表示随机变量（如治..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-09-17T03:19:05.000Z"}],["meta",{"property":"article:tag","content":"response_md"}],["meta",{"property":"article:tag","content":"DeepSeek-R1-0528-1st"}],["meta",{"property":"article:modified_time","content":"2025-09-17T03:19:05.000Z"}]]},"git":{"createdTime":1758079145000,"updatedTime":1758079145000,"contributors":[{"name":"lizhimou","username":"lizhimou","email":"lizhimou@bytedance.com","commits":1,"url":"https://github.com/lizhimou"}]},"readingTime":{"minutes":9.21,"words":2764},"filePathRelative":"posts/Causal inference/What-if book reading notes/response_md/DeepSeek-R1-0528-1st/Chapter_6.md","excerpt":"\\n### 第6章：因果效应的图形表示  \\n**核心目标**：引入因果图（Causal Diagrams）作为工具，直观表示因果结构和假设，解决复杂场景中的因果推断问题。  \\n<hr>\\n<h4><strong>6.1 因果图（Causal Diagrams）</strong></h4>\\n<p><strong>技术重点</strong>：</p>\\n<ol>\\n<li>\\n<p><strong>定义与结构</strong>：</p>\\n<ul>\\n<li><strong>因果图</strong>是有向无环图（Directed Acyclic Graph, DAG），节点（Nodes）表示随机变量（如治疗 (A)、结局 (Y)、协变量 (L)），边（Edges）表示直接因果效应。</li>\\n<li><strong>关键特性</strong>：\\n<ul>\\n<li><em>有向性</em>：箭头方向表示因果方向（如 (L \\\\to A) 表示 (L) 可能引起 (A)）。</li>\\n<li><em>无环性</em>：无循环路径（变量不能直接或间接导致自身）。</li>\\n</ul>\\n</li>\\n<li><strong>示例</strong>（图6.1）：\\n<ul>\\n<li>变量：(L)（疾病严重程度）、(A)（心脏移植）、(Y)（死亡）。</li>\\n<li>路径：(L \\\\to A)（疾病影响移植概率），(A \\\\to Y)（移植影响死亡），(L \\\\to Y)（疾病直接影响死亡）。</li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n<li>\\n<p><strong>因果DAG的正式定义</strong>（Technical Point 6.1）：</p>\\n<ul>\\n<li><strong>因果马尔可夫假设（Causal Markov Assumption）</strong>：给定直接原因（父节点），变量独立于其非后代。</li>\\n<li><strong>联合密度分解</strong>：<p v-pre=\\"\\" class=\\"katex-block\\"><span class=\\"katex-display\\"><span class=\\"katex\\"><span class=\\"katex-mathml\\"><math xmlns=\\"http://www.w3.org/1998/Math/MathML\\" display=\\"block\\"><semantics><mrow><mi>f</mi><mo stretchy=\\"false\\">(</mo><mi>v</mi><mo stretchy=\\"false\\">)</mo><mo>=</mo><munderover><mo>∏</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><mi>f</mi><mo stretchy=\\"false\\">(</mo><msub><mi>v</mi><mi>j</mi></msub><mi mathvariant=\\"normal\\">∣</mi><msub><mtext>pa</mtext><mi>j</mi></msub><mo stretchy=\\"false\\">)</mo></mrow><annotation encoding=\\"application/x-tex\\">f(v) = \\\\prod_{j=1}^{M} f(v_j | \\\\text{pa}_j)\\n</annotation></semantics></math></span><span class=\\"katex-html\\" aria-hidden=\\"true\\"><span class=\\"base\\"><span class=\\"strut\\" style=\\"height:1em;vertical-align:-0.25em;\\"></span><span class=\\"mord mathnormal\\" style=\\"margin-right:0.10764em;\\">f</span><span class=\\"mopen\\">(</span><span class=\\"mord mathnormal\\" style=\\"margin-right:0.03588em;\\">v</span><span class=\\"mclose\\">)</span><span class=\\"mspace\\" style=\\"margin-right:0.2778em;\\"></span><span class=\\"mrel\\">=</span><span class=\\"mspace\\" style=\\"margin-right:0.2778em;\\"></span></span><span class=\\"base\\"><span class=\\"strut\\" style=\\"height:3.2421em;vertical-align:-1.4138em;\\"></span><span class=\\"mop op-limits\\"><span class=\\"vlist-t vlist-t2\\"><span class=\\"vlist-r\\"><span class=\\"vlist\\" style=\\"height:1.8283em;\\"><span style=\\"top:-1.8723em;margin-left:0em;\\"><span class=\\"pstrut\\" style=\\"height:3.05em;\\"></span><span class=\\"sizing reset-size6 size3 mtight\\"><span class=\\"mord mtight\\"><span class=\\"mord mathnormal mtight\\" style=\\"margin-right:0.05724em;\\">j</span><span class=\\"mrel mtight\\">=</span><span class=\\"mord mtight\\">1</span></span></span></span><span style=\\"top:-3.05em;\\"><span class=\\"pstrut\\" style=\\"height:3.05em;\\"></span><span><span class=\\"mop op-symbol large-op\\">∏</span></span></span><span style=\\"top:-4.3em;margin-left:0em;\\"><span class=\\"pstrut\\" style=\\"height:3.05em;\\"></span><span class=\\"sizing reset-size6 size3 mtight\\"><span class=\\"mord mtight\\"><span class=\\"mord mathnormal mtight\\" style=\\"margin-right:0.10903em;\\">M</span></span></span></span></span><span class=\\"vlist-s\\">​</span></span><span class=\\"vlist-r\\"><span class=\\"vlist\\" style=\\"height:1.4138em;\\"><span></span></span></span></span></span><span class=\\"mspace\\" style=\\"margin-right:0.1667em;\\"></span><span class=\\"mord mathnormal\\" style=\\"margin-right:0.10764em;\\">f</span><span class=\\"mopen\\">(</span><span class=\\"mord\\"><span class=\\"mord mathnormal\\" style=\\"margin-right:0.03588em;\\">v</span><span class=\\"msupsub\\"><span class=\\"vlist-t vlist-t2\\"><span class=\\"vlist-r\\"><span class=\\"vlist\\" style=\\"height:0.3117em;\\"><span style=\\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\\"><span class=\\"pstrut\\" style=\\"height:2.7em;\\"></span><span class=\\"sizing reset-size6 size3 mtight\\"><span class=\\"mord mathnormal mtight\\" style=\\"margin-right:0.05724em;\\">j</span></span></span></span><span class=\\"vlist-s\\">​</span></span><span class=\\"vlist-r\\"><span class=\\"vlist\\" style=\\"height:0.2861em;\\"><span></span></span></span></span></span></span><span class=\\"mord\\">∣</span><span class=\\"mord\\"><span class=\\"mord text\\"><span class=\\"mord\\">pa</span></span><span class=\\"msupsub\\"><span class=\\"vlist-t vlist-t2\\"><span class=\\"vlist-r\\"><span class=\\"vlist\\" style=\\"height:0.2175em;\\"><span style=\\"top:-2.4559em;margin-right:0.05em;\\"><span class=\\"pstrut\\" style=\\"height:2.7em;\\"></span><span class=\\"sizing reset-size6 size3 mtight\\"><span class=\\"mord mathnormal mtight\\" style=\\"margin-right:0.05724em;\\">j</span></span></span></span><span class=\\"vlist-s\\">​</span></span><span class=\\"vlist-r\\"><span class=\\"vlist\\" style=\\"height:0.3802em;\\"><span></span></span></span></span></span></span><span class=\\"mclose\\">)</span></span></span></span></span></p>\\n其中 (\\\\text{pa}_j) 是 (V_j) 的父节点集合。</li>\\n<li><strong>因果DAG三条件</strong>：\\n<ol>\\n<li>缺失箭头 (\\\\Rightarrow) 无直接因果效应。</li>\\n<li>所有共同原因（含未测量变量）需包含在图中。</li>\\n<li>变量是其后代的因。</li>\\n</ol>\\n</li>\\n</ul>\\n</li>\\n<li>\\n<p><strong>应用场景</strong>：</p>\\n<ul>\\n<li><strong>观察性研究</strong>（图6.1）：需假设 (L) 是 (A) 和 (Y) 的唯一共同原因（对应条件可交换性 (Y^a \\\\perp!!!\\\\perp A \\\\mid L)）。</li>\\n<li><strong>随机实验</strong>（图6.2）：若 (A) 的分配与 (L) 无关（边际随机），则无需包含 (L)。</li>\\n</ul>\\n</li>\\n</ol>","autoDesc":true}`);export{y as comp,v as data};
