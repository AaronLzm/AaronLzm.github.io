import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as l,d as s,f as e,g as a,b as r}from"./app-DNiAfeJ7.js";const i={};function p(o,n){return r(),l("div",null,[...n[0]||(n[0]=[s("p",null,"以下是《随机化实验》一章的核心内容总结，涵盖所有重点概念及 Fine Points 的结论：",-1),s("hr",null,null,-1),s("h3",{id:"核心概念",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#核心概念"},[s("span",null,[s("strong",null,"核心概念")])])],-1),s("ol",null,[s("li",null,[s("p",null,[s("strong",null,"随机化实验的定义")]),s("ul",null,[s("li",null,[s("strong",null,"随机化实验"),a("：研究者主动干预（如分配治疗），且干预分配基于随机机制（如抛硬币）。")]),s("li",null,[s("strong",null,"非随机化实验"),a("：干预分配基于确定性规则（如按性别分配），易因混杂因素（如性别与预后的相关性）导致结果不可信。")])])]),s("li",null,[s("p",null,[s("strong",null,"反事实框架与因果效应")]),s("ul",null,[s("li",null,[s("strong",null,"反事实结果（Counterfactual Outcomes）"),a("：个体在接受治疗（(Y"),s("sup",{a:"0"},"{a=1})）或未接受治疗（(Y"),a(")）下的潜在结果。")]),s("li",null,[s("strong",null,"根本问题"),a("：现实中仅能观测到一种结果（对应实际接受的治疗），另一结果缺失（见表2.1）。")]),s("li",null,[s("strong",null,"关联（Association）≠ 因果（Causation）"),a("：观测到的风险比（如 (\\text{Pr}[Y=1|A=1]/\\text{Pr}[Y=1|A=0])）可能受混杂因素影响。")])])])],-1),s("hr",null,null,-1),s("h3",{id:"随机化的核心作用-交换性-exchangeability",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#随机化的核心作用-交换性-exchangeability"},[s("span",null,[s("strong",null,"随机化的核心作用：交换性（Exchangeability）")])])],-1),s("ol",null,[s("li",null,[s("p",null,[s("strong",null,"无条件交换性（Marginal Exchangeability）")]),s("ul",null,[s("li",null,[s("strong",null,"定义"),a("：$$Y^a \\perp!!!\\perp A$$（反事实结果独立于实际治疗分配）。")]),s("li",null,[s("strong",null,"意义"),a("：在"),s("strong",null,"边际随机化实验"),a("（单一随机概率分配全体）中成立，此时关联即因果："),s("br"),a(" ["),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"Pr"),s("mo",{stretchy:"false"},"["),s("msup",null,[s("mi",null,"Y"),s("mi",null,"a")]),s("mo",null,"="),s("mn",null,"1"),s("mo",{stretchy:"false"},"]"),s("mo",null,"="),s("mtext",null,"Pr"),s("mo",{stretchy:"false"},"["),s("mi",null,"Y"),s("mo",null,"="),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"A"),s("mo",null,"="),s("mi",null,"a"),s("mo",{stretchy:"false"},"]")]),s("annotation",{encoding:"application/x-tex"},"\\text{Pr}[Y^a=1] = \\text{Pr}[Y=1|A=a] ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"Pr")]),s("span",{class:"mopen"},"["),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7144em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"a")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"Pr")]),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"1∣"),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mclose"},"]")])])])])]),a(" ]")]),s("li",null,[s("strong",null,"因果效应计算"),a("： "),s("ul",null,[s("li",null,[a("因果风险比：($$\\frac{\\text{Pr}[Y"),s("sup",{a:"0"},"{a=1}=1]}{\\text{Pr}[Y"),a("=1]} = \\frac{\\text{Pr}[Y=1|A=1]}{\\text{Pr}[Y=1|A=0]}$$)")])])])])]),s("li",null,[s("p",null,[s("strong",null,"条件交换性（Conditional Exchangeability）")]),s("ul",null,[s("li",null,[s("strong",null,"定义"),a("：($$Y^a \\perp!!!\\perp A \\mid L$$)（在协变量 (L) 的每一层内，反事实结果独立于治疗分配）。")]),s("li",null,[s("strong",null,"适用场景"),a("："),s("strong",null,"条件随机化实验"),a("（随机概率依赖于协变量 (L)，如按病情严重程度分层随机）。")]),s("li",null,[s("strong",null,"必要性"),a("：若 (L) 影响治疗分配和结局（如 (L=) 病情危重），则边际交换性不成立，需分层分析。")])])])],-1),e('<hr><h3 id="调整混杂的方法" tabindex="-1"><a class="header-anchor" href="#调整混杂的方法"><span><strong>调整混杂的方法</strong></span></a></h3><h4 id="_1-标准化-standardization" tabindex="-1"><a class="header-anchor" href="#_1-标准化-standardization"><span>1. <strong>标准化（Standardization）</strong></span></a></h4><ul><li><strong>步骤</strong>：<br> (1) 计算每层 (L=l) 的观测风险：(\\text{Pr}[Y=1|L=l,A=a])；<br> (2) 加权平均（权重为 (L) 的分布 (\\text{Pr}[L=l])）：<br> [<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Pr</mtext><mo stretchy="false">[</mo><msup><mi>Y</mi><mi>a</mi></msup><mo>=</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><munder><mo>∑</mo><mi>l</mi></munder><mtext>Pr</mtext><mo stretchy="false">[</mo><mi>Y</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">∣</mi><mi>L</mi><mo>=</mo><mi>l</mi><mo separator="true">,</mo><mi>A</mi><mo>=</mo><mi>a</mi><mo stretchy="false">]</mo><mo>⋅</mo><mtext>Pr</mtext><mo stretchy="false">[</mo><mi>L</mi><mo>=</mo><mi>l</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\\text{Pr}[Y^a=1] = \\sum_l \\text{Pr}[Y=1|L=l,A=a] \\cdot \\text{Pr}[L=l] </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Pr</span></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3521em;vertical-align:-1.3021em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8479em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord text"><span class="mord">Pr</span></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1∣</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">Pr</span></span><span class="mopen">[</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span></span></span></span></span></p> ]</li><li><strong>输出</strong>：反事实风险 → 因果风险比/差。</li></ul><h4 id="_2-逆概率加权-inverse-probability-weighting-ipw" tabindex="-1"><a class="header-anchor" href="#_2-逆概率加权-inverse-probability-weighting-ipw"><span>2. <strong>逆概率加权（Inverse Probability Weighting, IPW）</strong></span></a></h4><ul><li><strong>权重定义</strong>：个体权重 ($$W^A = 1 / \\text{Pr}[A=a|L=l]$$)（即接受其实际治疗的概率的倒数）。</li><li><strong>构建伪总体（Pseudo-Population）</strong>： <ul><li>权重调整后，伪总体中治疗组与对照组在 ($$L$$) 上平衡（即边际交换性成立）。</li><li><strong>因果效应计算</strong>：伪总体中的关联即因果效应。</li></ul></li><li><strong>与标准化的等价性</strong>：在正性假设下（(\\text{Pr}[A=a|L=l]&gt;0)），二者数学等价（见 Technical Point 2.3）。</li></ul><hr><h3 id="关键结论与-fine-points" tabindex="-1"><a class="header-anchor" href="#关键结论与-fine-points"><span><strong>关键结论与 Fine Points</strong></span></a></h3><ol><li><p><strong>效应修饰（Effect Modification）</strong></p><ul><li>若因果效应在 (L) 的不同层（如 (L=0) 和 (L=1)）中不同，则 (L) 是效应修饰因子。</li><li><strong>分析选择</strong>： <ul><li>关注层特异效应 → 分层分析；</li><li>关注总体效应 → 标准化或 IPW。</li></ul></li></ul></li><li><p><strong>交叉实验（Crossover Experiments）</strong>（Fine Point 2.1）</p><ul><li><strong>适用场景</strong>：同一个体在不同时期接受不同治疗（如药物临时效果研究）。</li><li><strong>强假设</strong>：<br> (i) 无残留效应（No carryover effect）；<br> (ii) 个体因果效应不随时间变化；<br> (iii) 无治疗下的反事实结果不随时间变化。</li><li><strong>局限性</strong>：不适用于不可逆处理（如心脏移植）或终点（如死亡）。</li></ul></li><li><p><strong>风险时期（Risk Periods）</strong>（Fine Point 2.2）</p><ul><li><strong>定义重要性</strong>：因果效应依赖于风险时期（如 5 天死亡率 vs. 100 年死亡率）。</li><li><strong>核心洞见</strong>：处理常延迟事件（如死亡）而非完全预防 → 效应大小随观察时间变化。</li></ul></li><li><p><strong>连续处理的局限</strong>（Technical Point 2.3）</p><ul><li><strong>IPW 的局限性</strong>：处理连续时，标准 IPW 不能直接推广（需特殊方法，见第 12.4 章）。</li><li><strong>标准化要求</strong>：处理 (A) 和协变量 (L) 需离散化（或非参数估计）。</li></ul></li><li><p><strong>正性假设（Positivity Assumption）</strong></p><ul><li><strong>要求</strong>：对所有 (l)，若 (\\text{Pr}[L=l]&gt;0)，则 (\\text{Pr}[A=a|L=l] &gt; 0)。</li><li><strong>若违背</strong>：标准化与 IPW 无法估计反事实风险（因部分群体缺乏治疗变异）。</li></ul></li></ol><hr><h3 id="章节核心结论" tabindex="-1"><a class="header-anchor" href="#章节核心结论"><span><strong>章节核心结论</strong></span></a></h3><ul><li><strong>随机化的力量</strong>：通过物理控制（随机分配）实现交换性，使关联度量（如风险比）等于因果效应。</li><li><strong>条件随机化的分析</strong>：当随机化依赖于协变量 (L) 时，需用 <strong>标准化</strong> 或 <strong>IPW</strong> 调整以获得总体因果效应。</li><li><strong>观察性研究的过渡</strong>：随机实验常不可行（伦理/实际限制）→ 下一章将讨论观察性研究中的因果推断。</li></ul><blockquote><p><strong>注</strong>：所有方法依赖 <strong>条件交换性</strong>、<strong>一致性</strong>（(Y=Y^A)）及 <strong>正性</strong> 假设。违反任一条件将导致因果效应不可识别。</p></blockquote>',13)])])}const g=t(i,[["render",p]]),h=JSON.parse(`{"path":"/posts/Causal%20inference/What-if%20book%20reading%20notes/Chapter%202/Chapter%202.html","title":"Chapter 2","lang":"en-US","frontmatter":{"title":"Chapter 2","category":"Causal inference","tags":["Chapter 2","What-if book reading notes"],"description":"以下是《随机化实验》一章的核心内容总结，涵盖所有重点概念及 Fine Points 的结论： 核心概念 随机化实验的定义 随机化实验：研究者主动干预（如分配治疗），且干预分配基于随机机制（如抛硬币）。 非随机化实验：干预分配基于确定性规则（如按性别分配），易因混杂因素（如性别与预后的相关性）导致结果不可信。 反事实框架与因果效应 反事实结果（Count...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Chapter 2\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-17T03:19:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Aaron L\\",\\"url\\":\\"https://aaronlzm.github.io\\",\\"email\\":\\"lzm_aaron@outlook.com\\"}]}"],["meta",{"property":"og:url","content":"https://aaronlzm.github.io/posts/Causal%20inference/What-if%20book%20reading%20notes/Chapter%202/Chapter%202.html"}],["meta",{"property":"og:site_name","content":"Aaron's Blog"}],["meta",{"property":"og:title","content":"Chapter 2"}],["meta",{"property":"og:description","content":"以下是《随机化实验》一章的核心内容总结，涵盖所有重点概念及 Fine Points 的结论： 核心概念 随机化实验的定义 随机化实验：研究者主动干预（如分配治疗），且干预分配基于随机机制（如抛硬币）。 非随机化实验：干预分配基于确定性规则（如按性别分配），易因混杂因素（如性别与预后的相关性）导致结果不可信。 反事实框架与因果效应 反事实结果（Count..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-09-17T03:19:05.000Z"}],["meta",{"property":"article:tag","content":"What-if book reading notes"}],["meta",{"property":"article:tag","content":"Chapter 2"}],["meta",{"property":"article:modified_time","content":"2025-09-17T03:19:05.000Z"}]]},"git":{"createdTime":1758079145000,"updatedTime":1758079145000,"contributors":[{"name":"lizhimou","username":"lizhimou","email":"lizhimou@bytedance.com","commits":1,"url":"https://github.com/lizhimou"}]},"readingTime":{"minutes":4.01,"words":1204},"filePathRelative":"posts/Causal inference/What-if book reading notes/Chapter 2/Chapter 2.md","excerpt":"<p>以下是《随机化实验》一章的核心内容总结，涵盖所有重点概念及 Fine Points 的结论：</p>\\n<hr>\\n<h3><strong>核心概念</strong></h3>\\n<ol>\\n<li>\\n<p><strong>随机化实验的定义</strong></p>\\n<ul>\\n<li><strong>随机化实验</strong>：研究者主动干预（如分配治疗），且干预分配基于随机机制（如抛硬币）。</li>\\n<li><strong>非随机化实验</strong>：干预分配基于确定性规则（如按性别分配），易因混杂因素（如性别与预后的相关性）导致结果不可信。</li>\\n</ul>\\n</li>\\n<li>\\n<p><strong>反事实框架与因果效应</strong></p>\\n<ul>\\n<li><strong>反事实结果（Counterfactual Outcomes）</strong>：个体在接受治疗（(Y<sup a=\\"0\\">{a=1})）或未接受治疗（(Y</sup>)）下的潜在结果。</li>\\n<li><strong>根本问题</strong>：现实中仅能观测到一种结果（对应实际接受的治疗），另一结果缺失（见表2.1）。</li>\\n<li><strong>关联（Association）≠ 因果（Causation）</strong>：观测到的风险比（如 (\\\\text{Pr}[Y=1|A=1]/\\\\text{Pr}[Y=1|A=0])）可能受混杂因素影响。</li>\\n</ul>\\n</li>\\n</ol>","autoDesc":true}`);export{g as comp,h as data};
