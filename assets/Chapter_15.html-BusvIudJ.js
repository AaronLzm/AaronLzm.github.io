import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as m,f as i,w as r,r as p,b as c,g as a,d as s}from"./app-D3XHLyGs.js";const o={};function h(g,l){const t=p("think");return c(),e("div",null,[m(t,null,{default:r(()=>[...l[0]||(l[0]=[a(" 我们正在处理《因果推断：What If》第15章的内容。这一章主要讨论了结果回归（Outcome Regression）和倾向评分（Propensity Scores）方法。我将按照章节结构提炼技术重点和细节要点，并确保不遗漏任何重要细节。数学公式会使用LaTeX格式。 ",-1),s("h3",{id:"第15章-结果回归与倾向评分",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#第15章-结果回归与倾向评分"},[s("span",null,"第15章：结果回归与倾向评分")])],-1),s("ul",null,[s("li",null,[s("strong",null,"核心观点"),a("：结果回归和倾向评分分析是最常用的参数化因果推断方法，但它们通常不适用于处理时变治疗的复杂性（在第三部分会再次讨论g方法）。")]),s("li",null,[s("strong",null,"章节结构"),a("： "),s("ol",null,[s("li",null,[s("strong",null,"15.1 结果回归（Outcome Regression）")]),s("li",null,[s("strong",null,"15.2 倾向评分（Propensity Scores）")]),s("li",null,[s("strong",null,"15.3 倾向分层与标准化（Propensity Stratification and Standardization）")]),s("li",null,[s("strong",null,"15.4 倾向匹配（Propensity Matching）")]),s("li",null,[s("strong",null,"15.5 倾向模型、结构模型与预测模型（Propensity Models, Structural Models, Predictive Models）")])])])],-1),s("hr",null,null,-1),s("h3",{id:"技术重点与细节要点",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#技术重点与细节要点"},[s("span",null,"技术重点与细节要点")])],-1),s("h4",{id:"_15-1-结果回归",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_15-1-结果回归"},[s("span",null,"15.1 结果回归")])],-1),s("ul",null,[s("li",null,[s("strong",null,"目标"),a("：估计吸烟 cessation（治疗A）对体重增加（结果Y）的平均因果效应。")]),s("li",null,[s("strong",null,"平均因果效应定义"),a("："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("msup",null,[s("mi",null,"Y"),s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mi",null,"c"),s("mo",null,"="),s("mn",null,"0")])]),s("mo",{stretchy:"false"},"]"),s("mo",null,"−"),s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("msup",null,[s("mi",null,"Y"),s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mi",null,"c"),s("mo",null,"="),s("mn",null,"0")])]),s("mo",{stretchy:"false"},"]")]),s("annotation",{encoding:"application/x-tex"},"E[Y^{a=1,c=0}] - E[Y^{a=0,c=0}]")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0641em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8141em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"1"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"0")])])])])])])])]),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0641em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8141em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"0"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"0")])])])])])])])]),s("span",{class:"mclose"},"]")])])]),a("，其中c=0表示未删失。")]),s("li",null,[s("strong",null,"假设"),a("：在变量L（性别、年龄、种族、教育、吸烟强度、持续时间、日常体力活动、娱乐锻炼、体重）条件下，处理组和未处理组可交换（条件可交换性）。")]),s("li",null,[s("strong",null,"方法"),a("： "),s("ul",null,[s("li",null,"使用结构嵌套模型（Structural Nested Models），该模型包含治疗A和变量L的交互项，但不包含L的主效应（因为不关心L与Y的非因果关系）。"),s("li",null,[a("如果愿意指定L和Y在A水平内的关联，可考虑结构模型："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("msup",null,[s("mi",null,"Y"),s("mrow",null,[s("mi",null,"a"),s("mo",{separator:"true"},","),s("mi",null,"c"),s("mo",null,"="),s("mn",null,"0")])]),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"L"),s("mo",{stretchy:"false"},"]"),s("mo",null,"="),s("msub",null,[s("mi",null,"β"),s("mn",null,"0")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"β"),s("mn",null,"1")]),s("mi",null,"a"),s("mo",null,"+"),s("msub",null,[s("mi",null,"β"),s("mn",null,"2")]),s("mi",null,"a"),s("mi",null,"L"),s("mo",null,"+"),s("msub",null,[s("mi",null,"β"),s("mn",null,"3")]),s("mi",null,"L")]),s("annotation",{encoding:"application/x-tex"},"E[Y^{a,c=0}|L] = \\beta_0 + \\beta_1 a + \\beta_2 a L + \\beta_3 L ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.1141em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8641em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"0")])])])])])])])]),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"0")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"3")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord mathnormal"},"L")])])])])]),s("ul",null,[s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"β"),s("mn",null,"1")])]),s("annotation",{encoding:"application/x-tex"},"\\beta_1")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("和"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"β"),s("mn",null,"2")])]),s("annotation",{encoding:"application/x-tex"},"\\beta_2")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("：在L的每个层内，A对Y的平均因果效应。")]),s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"β"),s("mn",null,"0")])]),s("annotation",{encoding:"application/x-tex"},"\\beta_0")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"0")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("和"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"β"),s("mn",null,"3")])]),s("annotation",{encoding:"application/x-tex"},"\\beta_3")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"3")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("：在未治疗条件下（"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mn",null,"0")]),s("annotation",{encoding:"application/x-tex"},"a=0")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"0")])])]),a("），反事实结果均值随L的变化（"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"β"),s("mn",null,"3")])]),s("annotation",{encoding:"application/x-tex"},"\\beta_3")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"3")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a("不是L的因果效应，仅是关联）。")])])]),s("li",null,[s("strong",null,"估计"),a("：通过最小二乘法拟合结果回归模型："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("mi",null,"Y"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"A"),s("mo",{separator:"true"},","),s("mi",null,"C"),s("mo",null,"="),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mi",null,"L"),s("mo",{stretchy:"false"},"]"),s("mo",null,"="),s("msub",null,[s("mi",null,"α"),s("mn",null,"0")]),s("mo",null,"+"),s("msub",null,[s("mi",null,"α"),s("mn",null,"1")]),s("mi",null,"A"),s("mo",null,"+"),s("msub",null,[s("mi",null,"α"),s("mn",null,"2")]),s("mi",null,"A"),s("mi",null,"L"),s("mo",null,"+"),s("msub",null,[s("mi",null,"α"),s("mn",null,"3")]),s("mi",null,"L")]),s("annotation",{encoding:"application/x-tex"},"E[Y|A, C=0, L] = \\alpha_0 + \\alpha_1 A + \\alpha_2 A L + \\alpha_3 L ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"α"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0037em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"0")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"α"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0037em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"α"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0037em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"α"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0037em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"3")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mord mathnormal"},"L")])])])])]),s("ul",null,[s("li",null,[a("如果L足以调整混杂（和选择偏倚）且模型正确指定，则"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"α"),s("mo",null,"="),s("mi",null,"β")]),s("annotation",{encoding:"application/x-tex"},"\\alpha = \\beta")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"α"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β")])])]),a("。")])])])])]),s("li",null,[s("strong",null,"实例结果"),a("： "),s("ul",null,[s("li",null,[a("包含交互项（A与吸烟强度）："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mover",{accent:"true"},[s("mi",null,"β"),s("mo",null,"^")]),s("mn",null,"1")]),s("mo",null,"="),s("mn",null,"2.6")]),s("annotation",{encoding:"application/x-tex"},"\\hat{\\beta}_1 = 2.6")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.1523em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord accent"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.9579em"}},[s("span",{style:{top:"-3em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β")]),s("span",{style:{top:"-3.2634em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"accent-body",style:{left:"-0.1667em"}},[s("span",{class:"mord"},"^")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1944em"}},[s("span")])])])]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"2.6")])])]),a(", "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mover",{accent:"true"},[s("mi",null,"β"),s("mo",null,"^")]),s("mn",null,"2")]),s("mo",null,"="),s("mn",null,"0.05")]),s("annotation",{encoding:"application/x-tex"},"\\hat{\\beta}_2 = 0.05")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.1523em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},[s("span",{class:"mord accent"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.9579em"}},[s("span",{style:{top:"-3em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05278em"}},"β")]),s("span",{style:{top:"-3.2634em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"accent-body",style:{left:"-0.1667em"}},[s("span",{class:"mord"},"^")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1944em"}},[s("span")])])])]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0528em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"0.05")])])]),a("。 "),s("ul",null,[s("li",null,"吸烟5支/天者：效应估计2.8 kg (95% CI: 1.5, 4.1)。"),s("li",null,"吸烟40支/天者：效应估计4.4 kg (95% CI: 2.8, 6.1)。")])]),s("li",null,"无交互项（假设无效应修饰）：效应估计3.5 kg (95% CI: 2.6, 4.3)。")])]),s("li",null,[s("strong",null,"离散结局"),a("：可使用逻辑回归模型（如二分类Y）。")])],-1),s("h4",{id:"_15-2-倾向评分",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_15-2-倾向评分"},[s("span",null,"15.2 倾向评分")])],-1),s("ul",null,[s("li",null,[s("strong",null,"定义"),a("：倾向评分 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mi",null,"Pr"),s("mo",null,"⁡"),s("mo",{stretchy:"false"},"["),s("mi",null,"A"),s("mo",null,"="),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"L"),s("mo",{stretchy:"false"},"]")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L) = \\Pr[A=1|L]")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mop"},"Pr"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"1∣"),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},"]")])])]),a("，表示给定协变量L下个体接受治疗的概率。")]),s("li",null,[s("strong",null,"性质"),a("： "),s("ul",null,[s("li",null,[a("在理想随机试验中，"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mn",null,"0.5")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L) = 0.5")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"0.5")])])]),a("（对所有L）。")]),s("li",null,[a("观察性研究中，"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("未知，需从数据估计（如通过逻辑回归）。")])])]),s("li",null,[s("strong",null,"平衡性"),a("：若"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("相同，则处理组和未处理组的协变量L分布相同，即"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A"),s("mo",null,"⊥"),s("mtext",null," ⁣"),s("mtext",null," ⁣"),s("mtext",null," ⁣"),s("mo",null,"⊥"),s("mi",null,"L"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"A \\perp\\!\\!\\!\\perp L | \\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"⊥"),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}}),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}}),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mrel"},"⊥"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("（倾向评分平衡协变量）。")]),s("li",null,[s("strong",null,"关键结果"),a("：条件可交换性"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"Y"),s("mi",null,"a")]),s("mo",null,"⊥"),s("mtext",null," ⁣"),s("mtext",null," ⁣"),s("mtext",null," ⁣"),s("mo",null,"⊥"),s("mi",null,"A"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"L")]),s("annotation",{encoding:"application/x-tex"},"Y^a \\perp\\!\\!\\!\\perp A | L")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"a")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"⊥"),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}}),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}}),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mrel"},"⊥"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal"},"L")])])]),a(" 蕴含 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"Y"),s("mi",null,"a")]),s("mo",null,"⊥"),s("mtext",null," ⁣"),s("mtext",null," ⁣"),s("mtext",null," ⁣"),s("mo",null,"⊥"),s("mi",null,"A"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"Y^a \\perp\\!\\!\\!\\perp A | \\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"a")])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"⊥"),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}}),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}}),s("span",{class:"mspace",style:{"margin-right":"-0.1667em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mrel"},"⊥"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("，且正性条件在L水平和"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("水平等价。")]),s("li",null,[s("strong",null,"应用"),a("：倾向评分可用于分层、标准化、匹配来估计因果效应。")])],-1),s("h4",{id:"_15-3-倾向分层与标准化",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_15-3-倾向分层与标准化"},[s("span",null,"15.3 倾向分层与标准化")])],-1),s("ul",null,[s("li",null,[s("strong",null,"方法"),a("： "),s("ul",null,[s("li",null,[s("strong",null,"分层"),a("：将"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("分为若干层（如十分位数），每层内估计条件因果效应"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("mi",null,"Y"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"A"),s("mo",null,"="),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mi",null,"C"),s("mo",null,"="),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mi",null,"s"),s("mo",{stretchy:"false"},"]"),s("mo",null,"−"),s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("mi",null,"Y"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"A"),s("mo",null,"="),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mi",null,"C"),s("mo",null,"="),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mi",null,"s"),s("mo",{stretchy:"false"},"]")]),s("annotation",{encoding:"application/x-tex"},"E[Y|A=1, C=0, \\pi(L)=s] - E[Y|A=0, C=0, \\pi(L)=s]")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"s"),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"s"),s("span",{class:"mclose"},"]")])])]),a("。 "),s("ul",null,[s("li",null,[a("问题：连续"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("在同一层内仍可能有差异，影响可交换性。")])])]),s("li",null,[s("strong",null,"回归调整"),a("：将"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("作为连续变量纳入结果回归模型（如线性或样条项），避免分层问题。 "),s("ul",null,[s("li",null,"实例：效应估计3.6 kg (95% CI: 2.7, 4.5)。")])]),s("li",null,[s("strong",null,"标准化"),a("：为估计总体平均因果效应，用"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("分布标准化条件均值（类似第13章）。 "),s("ul",null,[s("li",null,"实例：效应估计3.6 kg (95% CI: 2.7, 4.6)。")])])])]),s("li",null,[s("strong",null,"效应修饰"),a("：若假设"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("无效应修饰，可不包含交互项（但需验证）。")])],-1),s("h4",{id:"_15-4-倾向匹配",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_15-4-倾向匹配"},[s("span",null,"15.4 倾向匹配")])],-1),s("ul",null,[s("li",null,[s("strong",null,"目标"),a("：构建匹配人群，使处理组和未处理组有相同"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("分布。")]),s("li",null,[s("strong",null,"方法"),a("：为每个处理个体匹配一个或多个未处理个体（"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("值接近，如"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",null,"±"),s("mn",null,"0.05")]),s("annotation",{encoding:"application/x-tex"},"\\pm 0.05")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),s("span",{class:"mord"},"±"),s("span",{class:"mord"},"0.05")])])]),a("）。")]),s("li",null,[s("strong",null,"权衡"),a("： "),s("ul",null,[s("li",null,[a("匹配标准过松："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("分布不同，可交换性不成立。")]),s("li",null,"匹配标准过紧：样本量减少，置信区间变宽。")])]),s("li",null,[s("strong",null,"正性问题"),a("：若"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("无重叠（如某些处理组"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("值高于所有未处理组），匹配会排除这些个体（不区分随机/结构非正性）。")]),s("li",null,[s("strong",null,"目标人群"),a("：匹配后效应估计可能仅适用于特定子群（如“处理组”），且难以描述（因"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"π"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\pi(L)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"π"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},")")])])]),a("无实际意义）。")])],-1),s("h4",{id:"_15-5-倾向模型、结构模型与预测模型",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_15-5-倾向模型、结构模型与预测模型"},[s("span",null,"15.5 倾向模型、结构模型与预测模型")])],-1),s("ul",null,[s("li",null,[s("strong",null,"倾向模型"),a("： "),s("ul",null,[s("li",null,[a("估计"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"Pr"),s("mo",null,"⁡"),s("mo",{stretchy:"false"},"["),s("mi",null,"A"),s("mo",null,"="),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"L"),s("mo",{stretchy:"false"},"]")]),s("annotation",{encoding:"application/x-tex"},"\\Pr[A=1|L]")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mop"},"Pr"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"1∣"),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mclose"},"]")])])]),a("，参数为讨厌参数（无因果解释）。")]),s("li",null,"用于IP加权、g-估计、匹配、分层。")])]),s("li",null,[s("strong",null,"结构模型"),a("： "),s("ul",null,[s("li",null,[a("描述治疗A与反事实结果"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"Y"),s("mi",null,"a")])]),s("annotation",{encoding:"application/x-tex"},"Y^a")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"a")])])])])])])])])])]),a("的关系（如边际结构模型、结构嵌套模型）。")]),s("li",null,[a("治疗参数有因果解释（如"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msup",null,[s("mi",null,"Y"),s("mi",null,"a")])]),s("annotation",{encoding:"application/x-tex"},"Y^a")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6644em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight"},"a")])])])])])])])])])]),a("的差异）。")])])]),s("li",null,[s("strong",null,"预测模型"),a("： "),s("ul",null,[s("li",null,"目标：预测结果（如购买概率、疾病风险），非因果推断。"),s("li",null,"所有协变量地位相同（无治疗A和变量L之分）。")])]),s("li",null,[s("strong",null,"变量选择误区"),a("： "),s("ul",null,[s("li",null,"预测模型：选择提升预测能力的变量（如逐步回归、机器学习）。"),s("li",null,"因果模型：只需包含保证可交换性的L，无关变量可能增加方差或偏倚（如工具变量、碰撞器）。"),s("li",null,[s("strong",null,"警告"),a("：倾向模型不需完美预测A，只需足够调整混杂。")])])])],-1),s("hr",null,null,-1),s("h3",{id:"结论",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#结论"},[s("span",null,"结论")])],-1),s("ul",null,[s("li",null,[s("strong",null,"适用性"),a("：结果回归和倾向评分方法简单常用，但仅适用于固定治疗场景，不适用于时变治疗（第三部分将讨论g方法）。")]),s("li",null,[s("strong",null,"核心假设"),a("：可交换性、正性、一致性。")]),s("li",null,[s("strong",null,"模型要求"),a("：正确指定函数形式（如用样条避免线性假设），避免无关变量。")]),s("li",null,[s("strong",null,"倾向评分方法"),a("：分层、标准化、匹配各有利弊，需注意目标人群定义和可迁移性。")]),s("li",null,[s("strong",null,"重要区分"),a("：因果模型（关注治疗效应） vs. 预测模型（关注关联），勿混淆变量选择策略。")])],-1),s("p",null,"此总结严格基于文本，未添加主观内容，确保技术细节完整。",-1)])]),_:1}),l[1]||(l[1]=i(' ### 第15章：结果回归与倾向评分（OUTCOME REGRESSION AND PROPENSITY SCORES） **核心观点**：结果回归和倾向评分是常用的参数化因果推断方法，但仅适用于简单场景（如固定治疗），无法处理时变治疗的复杂性（需使用g-methods）。本章聚焦其有限适用性。 <hr><h4 id="_15-1-结果回归-outcome-regression" tabindex="-1"><a class="header-anchor" href="#_15-1-结果回归-outcome-regression"><span><strong>15.1 结果回归（Outcome Regression）</strong></span></a></h4><ol><li><p><strong>目标与模型</strong></p><ul><li>估计吸烟 cessation（治疗 (A)）对体重 gain（结局 (Y)）的因果效应。</li><li>结构模型（faux marginal structural model）：<br> [<br> E[Y^{a,c=0}|L] = \\beta_0 + \\beta_1 a + \\beta_2 a L + \\beta_3 L<br> ] <ul><li>(\\beta_1, \\beta_2)：治疗 (A) 在 (L) 各层内的因果效应（(\\beta_1) 为基准效应，(\\beta_2) 为效应修饰）。</li><li>(\\beta_0, \\beta_3)：讨厌参数（nuisance parameters），描述 (Y^{a=0,c=0}) 与 (L) 的非因果关联（(\\beta_3) 非 (L) 的因果效应）。</li></ul></li></ul></li><li><p><strong>估计方法</strong></p><ul><li>通过最小二乘拟合结果回归模型：<br> [<br> E[Y|A, C=0, L] = \\alpha_0 + \\alpha_1 A + \\alpha_2 A L + \\alpha_3 L<br> ]</li><li><strong>假设</strong>：若 (L) 足以调整混杂/选择偏倚且模型正确，则 (\\alpha = \\beta)。</li><li><strong>实例</strong>： <ul><li>含交互项（吸烟强度）：(\\hat{\\beta}_1 = 2.6, \\hat{\\beta}_2 = 0.05) → 吸烟 5支/天者效应 2.8 kg (95% CI: 1.5, 4.1)，40支/天者 4.4 kg (95% CI: 2.8, 6.1)。</li><li>无交互项（假设无效应修饰）：效应 3.5 kg (95% CI: 2.6, 4.3)。</li></ul></li></ul></li><li><p><strong>关键局限</strong></p><ul><li>依赖 (L-Y) 关联的正确设定（错误指定导致偏倚）。</li><li>与结构嵌套模型对比：后者不建模 (L-Y) 关系，但依赖治疗模型正确性（见 Fine Point 15.1）。</li></ul></li></ol><hr><h4 id="_15-2-倾向评分-propensity-scores" tabindex="-1"><a class="header-anchor" href="#_15-2-倾向评分-propensity-scores"><span><strong>15.2 倾向评分（Propensity Scores）</strong></span></a></h4><ol><li><p><strong>定义与性质</strong></p><ul><li>倾向评分 (\\pi(L) = \\Pr[A=1|L])，衡量给定 (L) 的治疗倾向。</li><li><strong>平衡性</strong>：若 (L) 满足可交换性，则 (\\pi(L)) 也满足：<br> [<br> A \\perp!!!\\perp L \\mid \\pi(L) \\quad \\text{且} \\quad Y^a \\perp!!!\\perp A \\mid \\pi(L)<br> ]</li><li><strong>估计</strong>：通过逻辑回归（如 (\\text{logit} \\Pr[A=1|L] = \\alpha_0 + \\alpha_1 L)）。</li></ul></li><li><p><strong>核心定理（Rosenbaum &amp; Rubin, 1983）</strong></p><ul><li>若基于 (L) 的可交换性/正性成立，则基于 (\\pi(L)) 也成立（见 Technical Point 15.1）。</li><li>倾向评分是平衡评分（balancing score）的最简形式。</li></ul></li></ol><hr><h4 id="_15-3-倾向分层与标准化-propensity-stratification-and-standardization" tabindex="-1"><a class="header-anchor" href="#_15-3-倾向分层与标准化-propensity-stratification-and-standardization"><span><strong>15.3 倾向分层与标准化（Propensity Stratification and Standardization）</strong></span></a></h4><ol><li><p><strong>分层法</strong></p><ul><li>步骤： <ol><li>估计 (\\hat{\\pi}(L))，按十分位数分层。</li><li>每层内计算效应 (E[Y|A=1, C=0, \\pi(L)=s] - E[Y|A=0, C=0, \\pi(L)=s])。</li></ol></li><li><strong>问题</strong>：连续 (\\pi(L)) 在层内分布可能不同 → 可交换性不严格成立。</li><li><strong>实例</strong>：效应范围 0.0–6.6 kg（置信区间宽）。</li></ul></li><li><p><strong>回归调整</strong></p><ul><li>将 (\\hat{\\pi}(L)) 作为连续变量纳入结果回归：<br> [<br> E[Y|A, C=0, \\pi(L)] = \\alpha_0 + \\alpha_1 A + \\alpha_2 \\pi(L)<br> ] <ul><li><strong>实例</strong>：效应 3.6 kg (95% CI: 2.7, 4.5)。</li></ul></li><li><strong>优势</strong>：避免分层离散化问题；可用样条（splines）增强灵活性。</li></ul></li><li><p><strong>标准化法</strong></p><ul><li>标准化条件均值至总体：<br> [<br> E[Y^{a,c=0}] = \\sum_s E[Y|A=a, C=0, \\pi(L)=s] \\cdot \\Pr[\\pi(L)=s]<br> ] <ul><li><strong>实例</strong>：效应 3.6 kg (95% CI: 2.7, 4.6)。</li></ul></li></ul></li></ol><hr><h4 id="_15-4-倾向匹配-propensity-matching" tabindex="-1"><a class="header-anchor" href="#_15-4-倾向匹配-propensity-matching"><span><strong>15.4 倾向匹配（Propensity Matching）</strong></span></a></h4><ol><li><p><strong>方法</strong></p><ul><li>为每个处理个体匹配未处理个体（(\\hat{\\pi}(L)) 相近，如 (\\pm 0.05)），形成匹配人群。</li><li><strong>目标</strong>：在匹配人群中实现 (A \\perp!!!\\perp \\pi(L))。</li></ul></li><li><p><strong>挑战</strong></p><ul><li><strong>偏差-方差权衡</strong>： <ul><li>宽松匹配 → (\\pi(L)) 分布差异 → 可交换性不成立。</li><li>严格匹配 → 样本减少 → 置信区间变宽。</li></ul></li><li><strong>正性问题</strong>： <ul><li>若 (\\hat{\\pi}(L)) 无重叠（如高倾向个体无对照），匹配会排除个体（不区分随机/结构非正性）。</li></ul></li><li><strong>目标人群模糊</strong>：匹配后效应仅适用于成功匹配的子群（难解释或外推）。</li></ul></li><li><p><strong>对比其他方法</strong></p><ul><li>倾向回归/标准化保留全样本，假设随机非正性；匹配强制限制样本。</li></ul></li></ol><hr><h4 id="_15-5-倾向模型、结构模型与预测模型-1" tabindex="-1"><a class="header-anchor" href="#_15-5-倾向模型、结构模型与预测模型-1"><span><strong>15.5 倾向模型、结构模型与预测模型</strong></span></a></h4><ol><li><p><strong>模型类型对比</strong></p><table><thead><tr><th><strong>模型类型</strong></th><th><strong>目标</strong></th><th><strong>参数性质</strong></th><th><strong>依赖正确性</strong></th></tr></thead><tbody><tr><td>倾向模型</td><td>估计 (\\Pr[A=1|L])</td><td>讨厌参数（无因果解释）</td><td>治疗模型</td></tr><tr><td>结构模型（因果）</td><td>直接建模 (Y^a) 与 (A) 关系</td><td>因果参数（如 (\\beta_1)）</td><td>结构模型形式</td></tr><tr><td>预测模型</td><td>预测 (Y)（非因果）</td><td>关联参数</td><td>预测准确性</td></tr></tbody></table></li><li><p><strong>变量选择误区</strong></p><ul><li><strong>因果 vs. 预测</strong>： <ul><li>预测模型：选择提升预测力的变量（如机器学习、逐步回归）。</li><li>因果模型：只需包含保证可交换性的 (L)，无关变量可能： <ul><li>增加方差（如医院变量导致非重叠）。</li><li>引入偏倚（如调整碰撞器或工具变量）。</li></ul></li></ul></li><li><strong>关键警告</strong>：倾向模型不需完美预测 (A)（例：若 (\\pi(L)=0.99/0.01)，估计方差无限大）。</li></ul></li><li><p><strong>结构模型类型</strong></p><ul><li><strong>边际结构模型（MSM）</strong>：参数化 (E[Y^a])，可选效应修饰 (V)。</li><li><strong>结构嵌套模型（SNM）</strong>：参数化 (E[Y^a - Y^{a=0} \\mid L])。</li></ul></li></ol><hr><h3 id="结论-1" tabindex="-1"><a class="header-anchor" href="#结论-1"><span><strong>结论</strong></span></a></h3><ol><li><p><strong>方法适用性</strong>：</p><ul><li>结果回归和倾向评分适用于简单固定治疗场景，但需严格满足可交换性、正性、一致性。</li><li>时变治疗需用 g-methods（IP 加权、标准化、g-估计）。</li></ul></li><li><p><strong>核心局限</strong>：</p><ul><li><strong>结果回归</strong>：依赖 (L-Y) 模型正确性。</li><li><strong>倾向评分</strong>：匹配法导致目标人群不明确；分层法存在离散化偏倚。</li><li><strong>变量选择</strong>：因果推断中避免预测导向的变量筛选（可能引入偏倚/方差）。</li></ul></li><li><p><strong>实践建议</strong>：</p><ul><li>优先使用双稳健方法（doubly robust methods）。</li><li>确保倾向评分模型包含足够混杂因子，但避免无关变量。</li><li>用样条等灵活模型减少函数形式误设。</li></ul></li></ol><blockquote><p>注：所有结论严格基于文本，未添加主观内容。数学公式、技术术语（如 nuisance parameters, balancing score）保留英文以确保准确性。</p></blockquote>',20))])}const y=n(o,[["render",h]]),x=JSON.parse(`{"path":"/posts/Causal%20inference/What-if%20book%20reading%20notes/response_md/DeepSeek-R1-0528-1st/Chapter_15.html","title":"Chapter_15","lang":"en-US","frontmatter":{"title":"Chapter_15","category":"Causal inference","tags":["DeepSeek-R1-0528-1st","response_md"],"description":"### 第15章：结果回归与倾向评分（OUTCOME REGRESSION AND PROPENSITY SCORES） **核心观点**：结果回归和倾向评分是常用的参数化因果推断方法，但仅适用于简单场景（如固定治疗），无法处理时变治疗的复杂性（需使用g-methods）。本章聚焦其有限适用性。 15.1 结果回归（Outcome Regression...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Chapter_15\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-17T03:19:05.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Aaron L\\",\\"url\\":\\"https://aaronlzm.github.io\\",\\"email\\":\\"lzm_aaron@outlook.com\\"}]}"],["meta",{"property":"og:url","content":"https://aaronlzm.github.io/posts/Causal%20inference/What-if%20book%20reading%20notes/response_md/DeepSeek-R1-0528-1st/Chapter_15.html"}],["meta",{"property":"og:site_name","content":"Aaron's Blog"}],["meta",{"property":"og:title","content":"Chapter_15"}],["meta",{"property":"og:description","content":"### 第15章：结果回归与倾向评分（OUTCOME REGRESSION AND PROPENSITY SCORES） **核心观点**：结果回归和倾向评分是常用的参数化因果推断方法，但仅适用于简单场景（如固定治疗），无法处理时变治疗的复杂性（需使用g-methods）。本章聚焦其有限适用性。 15.1 结果回归（Outcome Regression..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-09-17T03:19:05.000Z"}],["meta",{"property":"article:tag","content":"response_md"}],["meta",{"property":"article:tag","content":"DeepSeek-R1-0528-1st"}],["meta",{"property":"article:modified_time","content":"2025-09-17T03:19:05.000Z"}]]},"git":{"createdTime":1758079145000,"updatedTime":1758079145000,"contributors":[{"name":"lizhimou","username":"lizhimou","email":"lizhimou@bytedance.com","commits":1,"url":"https://github.com/lizhimou"}]},"readingTime":{"minutes":10.04,"words":3012},"filePathRelative":"posts/Causal inference/What-if book reading notes/response_md/DeepSeek-R1-0528-1st/Chapter_15.md","excerpt":"\\n### 第15章：结果回归与倾向评分（OUTCOME REGRESSION AND PROPENSITY SCORES）  \\n**核心观点**：结果回归和倾向评分是常用的参数化因果推断方法，但仅适用于简单场景（如固定治疗），无法处理时变治疗的复杂性（需使用g-methods）。本章聚焦其有限适用性。\\n<hr>\\n<h4><strong>15.1 结果回归（Outcome Regression）</strong></h4>","autoDesc":true}`);export{y as comp,x as data};
