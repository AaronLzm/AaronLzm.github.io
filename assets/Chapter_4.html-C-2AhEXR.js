import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a as i,g as t,d as s,f as r,w as m,r as o,b as p}from"./app-F5yqrHBi.js";const c={};function g(h,l){const a=o("think");return p(),e("div",null,[i(a,null,{default:m(()=>[...l[0]||(l[0]=[t(" 我们正在处理《因果推断：What If》第4章“效应修正”的内容。用户要求我们提炼所有技术重点和细节要点，使用中文总结但保留英文术语，并用LaTeX格式书写公式。我们需要严格遵循章节结构，避免主观臆断。 ",-1),s("p",null,"首先，我们分析章节结构：",-1),s("ul",null,[s("li",null,"4.1 处理效应的异质性：介绍效应修正的概念，通过心脏移植的例子展示不同亚组（性别）的因果效应差异。"),s("li",null,"4.2 识别效应修正的分层分析：讨论在随机实验和观察性研究中如何通过分层识别效应修正。"),s("li",null,"4.3 为什么关注效应修正：解释效应修正的重要性，包括可移植性、决策制定和机制理解。"),s("li",null,"4.4 分层作为一种调整方法：对比分层与标准化/IP加权的区别。"),s("li",null,"4.5 匹配作为另一种调整方法：描述匹配方法及其与效应修正的关系。"),s("li",null,"4.6 效应修正与调整方法：比较不同方法估计的效应类型。")],-1),s("p",null,"技术重点包括：",-1),s("ul",null,[s("li",null,"效应修正的定义：当处理A对结果Y的平均因果效应随变量V的水平变化时，V是效应修正因子。"),s("li",null,"效应修正依赖于效应度量（如风险差、风险比）。"),s("li",null,"分层分析是识别效应修正的关键方法。"),s("li",null,"在随机实验中，可通过观察关联直接估计亚组效应；在条件随机化或观察性研究中，需结合标准化或IP加权。"),s("li",null,"效应修正与交互作用的区别（后者在第5章讨论）。")],-1),s("p",null,"细节要点：",-1),s("ul",null,[s("li",null,"表4.1数据展示：性别分层（V=1女性，V=0男性）下反事实结果，计算性别特异因果风险比和风险差。"),s("li",null,"定性效应修正：效应方向相反（如女性有害，男性有益）。"),s("li",null,"可移植性问题：效应大小依赖于目标人群的效应修饰因子分布。"),s("li",null,"非折叠性：比值比是非折叠性度量，可能导致反直觉结果。")],-1),s("p",null,"数学公式：",-1),s("ul",null,[s("li",null,[t("因果风险差："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("msup",null,[s("mi",null,"Y"),s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mn",null,"1")])]),s("mo",null,"−"),s("msup",null,[s("mi",null,"Y"),s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mn",null,"0")])]),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"V"),s("mo",null,"="),s("mi",null,"v"),s("mo",{stretchy:"false"},"]")]),s("annotation",{encoding:"application/x-tex"},"E[Y^{a=1} - Y^{a=0}|V=v]")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0641em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8141em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"1")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0641em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8141em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"0")])])])])])])])]),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"V"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mclose"},"]")])])])]),s("li",null,[t("因果风险比："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mfrac",null,[s("mrow",null,[s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("msup",null,[s("mi",null,"Y"),s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mn",null,"1")])]),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"V"),s("mo",null,"="),s("mi",null,"v"),s("mo",{stretchy:"false"},"]")]),s("mrow",null,[s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("msup",null,[s("mi",null,"Y"),s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mn",null,"0")])]),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"V"),s("mo",null,"="),s("mi",null,"v"),s("mo",{stretchy:"false"},"]")])])]),s("annotation",{encoding:"application/x-tex"},"\\frac{E[Y^{a=1}|V=v]}{E[Y^{a=0}|V=v]}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.6289em","vertical-align":"-0.52em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.1089em"}},[s("span",{style:{top:"-2.655em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen mtight"},"["),s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7463em"}},[s("span",{style:{top:"-2.786em","margin-right":"0.0714em"}},[s("span",{class:"pstrut",style:{height:"2.5em"}}),s("span",{class:"sizing reset-size3 size1 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"0")])])])])])])])]),s("span",{class:"mord mtight"},"∣"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.22222em"}},"V"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mclose mtight"},"]")])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.485em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen mtight"},"["),s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8913em"}},[s("span",{style:{top:"-2.931em","margin-right":"0.0714em"}},[s("span",{class:"pstrut",style:{height:"2.5em"}}),s("span",{class:"sizing reset-size3 size1 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"a"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"1")])])])])])])])]),s("span",{class:"mord mtight"},"∣"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.22222em"}},"V"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mclose mtight"},"]")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.52em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])]),s("li",null,[t("标准化公式："),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mo",null,"∑"),s("mi",null,"l")]),s("mi",null,"E"),s("mo",{stretchy:"false"},"["),s("mi",null,"Y"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"A"),s("mo",null,"="),s("mi",null,"a"),s("mo",{separator:"true"},","),s("mi",null,"L"),s("mo",null,"="),s("mi",null,"l"),s("mo",{stretchy:"false"},"]"),s("mi",null,"Pr"),s("mo",null,"⁡"),s("mo",{stretchy:"false"},"("),s("mi",null,"L"),s("mo",null,"="),s("mi",null,"l"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"V"),s("mo",null,"="),s("mi",null,"v"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\sum_l E[Y|A=a,L=l] \\Pr(L=l|V=v)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0497em","vertical-align":"-0.2997em"}}),s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1864em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2997em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E"),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"Y"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mclose"},"]"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},"Pr"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"L"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.22222em"}},"V"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mclose"},")")])])])])],-1),s("p",null,"结论：",-1),s("ul",null,[s("li",null,"因果效应是特定于人群的，需明确定义目标亚组。"),s("li",null,"报告绝对反事实风险优于仅报告效应度量。"),s("li",null,"不同调整方法估计不同效应（边际vs条件），需根据问题选择方法。")],-1),s("p",null,"现在，我们按子章节结构组织总结。",-1)])]),_:1}),l[1]||(l[1]=t(" ### 第4章：效应修正（Effect Modification）总结 ",-1)),l[2]||(l[2]=s("h4",{id:"_4-1-处理效应的异质性-heterogeneity-of-treatment-effects",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_4-1-处理效应的异质性-heterogeneity-of-treatment-effects"},[s("span",null,"4.1 处理效应的异质性（Heterogeneity of Treatment Effects）")])],-1)),l[3]||(l[3]=s("p",null,[s("strong",null,"技术重点"),t("：")],-1)),l[4]||(l[4]=s("ul",null,[s("li",null,[s("strong",null,"效应修正定义"),t("：变量 (V) 是处理 (A) 对结果 (Y) 的效应修正因子（effect modifier），若平均因果效应（average causal effect）在 (V) 的不同水平下不同。数学表达： "),s("ul",null,[s("li",null,"加法尺度（additive scale）：(E[Y^{a=1} - Y^{a=0}|V=1] \\neq E[Y^{a=1} - Y^{a=0}|V=0])"),s("li",null,[t("乘法尺度（multiplicative scale）：(\\frac{E[Y"),s("sup",{a:"0"},"{a=1}|V=1]}{E[Y"),t("|V=1]} \\neq \\frac{E[Y"),s("sup",{a:"0"},"{a=1}|V=0]}{E[Y"),t("|V=0]})")])])]),s("li",null,[s("strong",null,"效应度量依赖性"),t("：效应修正的存在依赖于所选效应度量（如风险差 risk difference、风险比 risk ratio），而非仅处理本身。")]),s("li",null,[s("strong",null,"定性效应修正（qualitative effect modification）"),t("：当亚组效应方向相反时（如 (V=1) 有害，(V=0) 有益），加法与乘法尺度均存在效应修正。")]),s("li",null,[s("strong",null,"反例"),t("：无定性效应修正时，可能仅存在单一尺度的修正（如仅有乘法尺度修正）。")])],-1)),l[5]||(l[5]=r('<p><strong>细节要点</strong>：</p><ul><li>表4.1 示例：心脏移植（(A)）对死亡率（(Y)）的效应在性别（(V)）分层下： <ul><li>女性（(V=1)）：因果风险比（causal risk ratio） = 1.5，风险差 = 0.2（有害）。</li><li>男性（(V=0)）：因果风险比 = 2/3，风险差 = -0.2（有益）。</li></ul></li><li>总体效应为零（风险比=1），因亚组效应方向相反而抵消（50%女性+50%男性）。</li><li><strong>关键结论</strong>：总体平均因果效应为零不排除亚组存在非零效应；仅当尖锐零假设（sharp null hypothesis）成立时，效应无异质性。</li></ul><hr><h4 id="_4-2-识别效应修正的分层分析-stratification-to-identify-effect-modification" tabindex="-1"><a class="header-anchor" href="#_4-2-识别效应修正的分层分析-stratification-to-identify-effect-modification"><span>4.2 识别效应修正的分层分析（Stratification to Identify Effect Modification）</span></a></h4><p><strong>技术重点</strong>：</p><ul><li><strong>分层方法</strong>：在 (V) 的每一水平（stratum）内计算 (A) 对 (Y) 的因果效应。</li><li><strong>数据要求</strong>： <ul><li><strong>理想边际随机实验</strong>：无条件交换性（unconditional exchangeability）成立时，观察关联（associational difference）等于因果效应（e.g., (\\text{Pr}[Y=1|A=1,V=v] - \\text{Pr}[Y=1|A=0,V=v]) 即因果风险差）。</li><li><strong>条件随机实验或观察性研究</strong>：需调整混杂因子 (L)（通过标准化或IP加权），再分层计算 (V) 的效应。</li></ul></li><li><strong>公式</strong>： <ul><li>条件因果风险：(\\text{Pr}[Y^{a}=1|V=v] = \\sum_l \\text{Pr}[Y=1|A=a,L=l] \\text{Pr}[L=l|V=v])（标准化）。</li><li>需满足条件交换性（(Y^a \\perp!!!\\perp A \\mid L)）和正性（positivity）。</li></ul></li></ul><p><strong>细节要点</strong>：</p><ul><li>表4.2 示例（罗马人数据）：国籍（(V)）修正心脏移植效应： <ul><li>希腊人（(V=1)）：因果风险差 = 0，风险比 = 1。</li><li>罗马人（(V=0)）：因果风险差 = 0.3，风险比 = 2。</li></ul></li><li><strong>代理 vs. 因果效应修正因子</strong>： <ul><li>国籍是代理修饰因子（surrogate effect modifier），真实修饰因子可能是手术质量（causal effect modifier）。</li></ul></li><li><strong>关键结论</strong>：分层分析可识别效应修正，但 (V) 本身未必是因果机制的一部分。</li></ul><hr><h4 id="_4-3-为何关注效应修正-why-care-about-effect-modification" tabindex="-1"><a class="header-anchor" href="#_4-3-为何关注效应修正-why-care-about-effect-modification"><span>4.3 为何关注效应修正（Why Care about Effect Modification）</span></a></h4><p><strong>技术重点</strong>：</p><ul><li><strong>可移植性（transportability）</strong>：效应大小依赖人群的效应修饰因子分布（e.g., 性别比例变化改变总体效应）。</li><li><strong>决策制定</strong>： <ul><li>加法尺度修正识别受益最大亚组（e.g., 表4.1中仅治疗男性）。</li><li>报告绝对反事实风险（(\\text{Pr}[Y^{a=1}=1|V=v]) 和 (\\text{Pr}[Y^{a=0}=1|V=v])）优于仅报告效应度量。</li></ul></li><li><strong>机制探索</strong>：效应修正可揭示生物学或社会机制（e.g., 包皮环切对HIV感染的影响）。</li></ul><p><strong>细节要点</strong>：</p><ul><li>非定性修正示例：石棉暴露效应在吸烟者/非吸烟者间幅度不同。</li><li><strong>关键结论</strong>：不存在“普适”因果效应；效应始终依赖于特定人群的修饰因子组合。</li></ul><hr><h4 id="_4-4-分层作为调整方法-stratification-as-a-form-of-adjustment" tabindex="-1"><a class="header-anchor" href="#_4-4-分层作为调整方法-stratification-as-a-form-of-adjustment"><span>4.4 分层作为调整方法（Stratification as a Form of Adjustment）</span></a></h4><p><strong>技术重点</strong>：</p><ul><li><strong>与标准化/IP加权对比</strong>： <ul><li>标准化/IP加权：估计边际效应（marginal effect，总体平均）。</li><li>分层：估计条件效应（conditional effect，亚组特异），需在 (L) 所有组合下计算。</li></ul></li><li><strong>局限性</strong>： <ul><li>强制评估所有 (L) 的效应修正，可能冗余。</li><li>非折叠性（noncollapsibility）：比值比（odds ratio）等度量在分层后可能不可比（见技术点4.3）。</li></ul></li><li><strong>公式</strong>：条件风险比 (\\frac{\\text{Pr}[Y=1|A=1,L=l]}{\\text{Pr}[Y=1|A=0,L=l]}) 仅在 (Y^a \\perp!!!\\perp A \\mid L) 时有因果解释。</li></ul><p><strong>细节要点</strong>：</p><ul><li><strong>限制（restriction）</strong>：当正性不成立时，仅分析特定亚组（e.g., (L=l) 且治疗/未治疗者均存在）。</li><li><strong>关键结论</strong>：分层适用于亚组效应分析，但估计总体效应时优先用标准化/IP加权。</li></ul><hr><h4 id="_4-5-匹配作为调整方法-matching-as-another-form-of-adjustment" tabindex="-1"><a class="header-anchor" href="#_4-5-匹配作为调整方法-matching-as-another-form-of-adjustment"><span>4.5 匹配作为调整方法（Matching as Another Form of Adjustment）</span></a></h4><p><strong>技术重点</strong>：</p><ul><li><strong>匹配目的</strong>：构建处理组与未处理组的 (L) 分布相似的子集（matched population）。</li><li><strong>方法</strong>： <ul><li>个体匹配（individual matching）：为每个未治疗者匹配 (L) 相同的治疗者。</li><li>频率匹配（frequency matching）：强制处理组与未处理组的 (L) 分布相同。</li></ul></li><li><strong>效应类型</strong>：估计条件效应（e.g., 未治疗者中的效应 (\\text{Pr}[Y^{a=1}=1|A=0])）。</li></ul><p><strong>细节要点</strong>：</p><ul><li>示例：表2.2中按病情严重度（(L)）匹配，估计未治疗者的因果风险比。</li><li><strong>关键结论</strong>：匹配改变修饰因子分布，估计效应仅适用于匹配子群。</li></ul><hr><h4 id="_4-6-效应修正与调整方法-effect-modification-and-adjustment-methods" tabindex="-1"><a class="header-anchor" href="#_4-6-效应修正与调整方法-effect-modification-and-adjustment-methods"><span>4.6 效应修正与调整方法（Effect Modification and Adjustment Methods）</span></a></h4><p><strong>技术重点</strong>：</p><ul><li><strong>方法对比</strong>： <table><thead><tr><th><strong>方法</strong></th><th><strong>效应类型</strong></th><th><strong>要求</strong></th></tr></thead><tbody><tr><td>标准化/IP加权</td><td>边际或条件效应</td><td>交换性、正性</td></tr><tr><td>分层/限制</td><td>条件效应（特定亚组）</td><td>亚组内交换性、正性</td></tr><tr><td>匹配</td><td>条件效应（匹配子群）</td><td>匹配后交换性、正性</td></tr></tbody></table></li><li><strong>非折叠性（Technical Point 4.3）</strong>： <ul><li>风险差/风险比可折叠（collapsible），但比值比（odds ratio）因尺度问题不可折叠，导致反直觉结果（e.g., 总体比值比小于亚组比值比）。</li></ul></li><li><strong>合并效应度量（pooling）</strong>：当无异质性时，可用Mantel-Haenszel等方法合并亚组估计，但需谨慎解释。</li></ul><p><strong>细节要点</strong>：</p><ul><li>表4.3示例：高血压（(Z)）的效应因方法不同而异： <ul><li>标准化：总体风险比 = 0.8。</li><li>分层：(L=0) 风险比 = 2.0；(L=1) 风险比 = 0.5。</li><li>匹配：未治疗者风险比 = 1.0。</li></ul></li><li><strong>关键结论</strong>：效应度量差异源于目标人群不同（非方法优劣）；需明确定义因果问题（目标人群/亚组）。</li></ul><hr><h3 id="结论" tabindex="-1"><a class="header-anchor" href="#结论"><span>结论</span></a></h3><ol><li><strong>效应修正的本质</strong>：因果效应非固定，依赖于人群的效应修饰因子（如性别、国籍），需通过分层分析识别。</li><li><strong>方法选择</strong>： <ul><li>目标为总体效应：用标准化或IP加权。</li><li>目标为亚组效应或效应修正：用分层（结合调整）或匹配。</li></ul></li><li><strong>报告建议</strong>：优先报告绝对反事实风险，避免仅依赖相对度量（如公式：(\\text{Pr}[Y^{a=1}=1|V=v]) 和 (\\text{Pr}[Y^{a=0}=1|V=v])）。</li><li><strong>可移植性</strong>：效应跨人群推广需谨慎，依赖修饰因子分布相似性。</li></ol>',35))])}const f=n(c,[["render",g]]),y=JSON.parse(`{"path":"/posts/Causal%20inference/What-if%20book%20reading%20notes/response_md/DeepSeek-R1-0528-1st/Chapter_4.html","title":"Chapter_4","lang":"en-US","frontmatter":{"date":"2025-09-17T11:19:05.000Z","title":"Chapter_4","category":"Causal inference","tags":["DeepSeek-R1-0528-1st","response_md"],"description":"### 第4章：效应修正（Effect Modification）总结 4.1 处理效应的异质性（Heterogeneity of Treatment Effects） 技术重点： 效应修正定义：变量 (V) 是处理 (A) 对结果 (Y) 的效应修正因子（effect modifier），若平均因果效应（average causal effect）在...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Chapter_4\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-09-17T11:19:05.000Z\\",\\"dateModified\\":\\"2025-11-26T03:53:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Aaron L\\",\\"url\\":\\"https://aaronlzm.github.io\\",\\"email\\":\\"lzm_aaron@outlook.com\\"}]}"],["meta",{"property":"og:url","content":"https://aaronlzm.github.io/posts/Causal%20inference/What-if%20book%20reading%20notes/response_md/DeepSeek-R1-0528-1st/Chapter_4.html"}],["meta",{"property":"og:site_name","content":"Aaron's Blog"}],["meta",{"property":"og:title","content":"Chapter_4"}],["meta",{"property":"og:description","content":"### 第4章：效应修正（Effect Modification）总结 4.1 处理效应的异质性（Heterogeneity of Treatment Effects） 技术重点： 效应修正定义：变量 (V) 是处理 (A) 对结果 (Y) 的效应修正因子（effect modifier），若平均因果效应（average causal effect）在..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-11-26T03:53:06.000Z"}],["meta",{"property":"article:tag","content":"response_md"}],["meta",{"property":"article:tag","content":"DeepSeek-R1-0528-1st"}],["meta",{"property":"article:published_time","content":"2025-09-17T11:19:05.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-26T03:53:06.000Z"}]]},"git":{"createdTime":1758079145000,"updatedTime":1764129186000,"contributors":[{"name":"lizhimou","username":"lizhimou","email":"lizhimou@bytedance.com","commits":2,"url":"https://github.com/lizhimou"}]},"readingTime":{"minutes":8.06,"words":2418},"filePathRelative":"posts/Causal inference/What-if book reading notes/response_md/DeepSeek-R1-0528-1st/Chapter_4.md","excerpt":"\\n### 第4章：效应修正（Effect Modification）总结\\n<h4>4.1 处理效应的异质性（Heterogeneity of Treatment Effects）</h4>\\n<p><strong>技术重点</strong>：</p>\\n<ul>\\n<li><strong>效应修正定义</strong>：变量 (V) 是处理 (A) 对结果 (Y) 的效应修正因子（effect modifier），若平均因果效应（average causal effect）在 (V) 的不同水平下不同。数学表达：\\n<ul>\\n<li>加法尺度（additive scale）：(E[Y^{a=1} - Y^{a=0}|V=1] \\\\neq E[Y^{a=1} - Y^{a=0}|V=0])</li>\\n<li>乘法尺度（multiplicative scale）：(\\\\frac{E[Y<sup a=\\"0\\">{a=1}|V=1]}{E[Y</sup>|V=1]} \\\\neq \\\\frac{E[Y<sup a=\\"0\\">{a=1}|V=0]}{E[Y</sup>|V=0]})</li>\\n</ul>\\n</li>\\n<li><strong>效应度量依赖性</strong>：效应修正的存在依赖于所选效应度量（如风险差 risk difference、风险比 risk ratio），而非仅处理本身。</li>\\n<li><strong>定性效应修正（qualitative effect modification）</strong>：当亚组效应方向相反时（如 (V=1) 有害，(V=0) 有益），加法与乘法尺度均存在效应修正。</li>\\n<li><strong>反例</strong>：无定性效应修正时，可能仅存在单一尺度的修正（如仅有乘法尺度修正）。</li>\\n</ul>","autoDesc":true}`);export{f as comp,y as data};
