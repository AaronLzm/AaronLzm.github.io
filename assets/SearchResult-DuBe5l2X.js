import{h as N,u as Y,j as X,k as Z,l as ee,t as ae,m as se,n as S,p as B,q as e,s as te,v as ie,x as ne,R as q,y as re,z as le,A as oe,B as ce,C as me,D as F,E as V,F as he,G as ue,H as pe,o as de,L as ge,I as ve,J as ye,K as _e,M as T,N as Ee,O as k}from"./app-CRl4xot-.js";const fe=["/","/intro.html","/zh/","/zh/intro.html","/posts/machine_learning/Resources.html","/zh/posts/notice.html","/posts/machine_learning/CV/ViT.html","/posts/machine_learning/Bayesian/All%20bayesian%20inference%20methods.html","/posts/machine_learning/Bayesian/Bayes%20by%20backprop%20-%20naive%20variational%20inference.html","/posts/machine_learning/Bayesian/Difference%20between%20MCMC%20and%20VI(SVI).html","/posts/machine_learning/Bayesian/Laplace%20Approximation.html","/posts/machine_learning/Bayesian/Markov%20Chain%20Monte%20Carlo(MCMC).html","/posts/machine_learning/Bayesian/Prior%20Uncertainty%20-%20A%20Key%20Hurdle%20in%20Advancing%20Bayesian%20Machine%20Learning.html","/posts/machine_learning/Bayesian/Stochastic%20Variational%20Inference.html","/posts/machine_learning/Bayesian/What%20is%20uncertainty%20in%20neural%20networks.html","/posts/machine_learning/Bayesian/Why%20we%20are%20assuming%20all%20weight%20distributions%20are%20Gaussian.html","/posts/machine_learning/Bayesian/reparameter%20trick.html","/posts/machine_learning/EBM/How%20to%20build%20EBMs.html","/posts/machine_learning/diffusers/How%20does%20diffusion%20model%20work.html","/posts/machine_learning/diffusers/What%20does%20the%20U-net%20do%20in%20diffusion%20models_.html","/posts/machine_learning/mathematics/KL%20Divergence%20in%20Variational%20Inference..html","/posts/machine_learning/mathematics/KL%20and%20JS%20divergence.html","/posts/machine_learning/mathematics/Norm%20%E8%8C%83%E6%95%B0.html","/posts/machine_learning/mathematics/Regularization%20for%20Deep%20Learning.html","/posts/machine_learning/mathematics/SVD.html","/posts/machine_learning/papers%20read/Bayesian%20LSTM.html","/posts/machine_learning/papers%20read/Global%20sparse%20momentum%20SGD.html","/posts/machine_learning/papers%20read/How%20to%20write%20%20literature%20review.html","/posts/machine_learning/reinforcement%20learning/RL%E7%9A%84%E4%B8%BB%E8%A6%81%E7%BB%93%E6%9E%84%E7%A7%8D%E7%B1%BB.html","/posts/machine_learning/CV/DETR/Generally_%20DETR.html","/posts/machine_learning/CV/JEPA/I-JEPA%20and%20ViT.html","/posts/machine_learning/reinforcement%20learning/actor-critic/Mode%20Collapse_.html","/posts/machine_learning/reinforcement%20learning/actor-critic/How%20PPO%20improved%20on%20mode%20collapsing.html","/posts/machine_learning/trick_layers/Attention/mamba%E7%AE%97%E6%B3%95.html","/posts/machine_learning/trick_layers/Attention/multi%20head%20attention.html","/posts/machine_learning/trick_layers/Attention/self-attention%20%E8%87%AA%E6%B3%A8%E6%84%8F%E5%8A%9B.html","/posts/machine_learning/trick_layers/Attention/self-attention%E8%AF%A6%E7%BB%86%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.html","/posts/machine_learning/trick_layers/Attention/%E5%8D%95%E5%A4%B4%20single%20head%20attention.html","/posts/machine_learning/trick_layers/Attention/%E5%8D%95%E5%A4%B4attention%20back%20propagation.html","/posts/machine_learning/trick_layers/transformers/Transformer%20it%20self.html","/posts/machine_learning/trick_layers/tricks/RMSNorm%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E6%95%88.html","/posts/machine_learning/trick_layers/tricks/layer%20normalization%20-%20batch%20normalization.html","/posts/machine_learning/trick_layers/tricks/%E6%97%8B%E8%BD%AC%E4%BD%8D%E7%BD%AE%E7%BC%96%E7%A0%81RoPE%E8%AF%A6%E8%A7%A3.html","/posts/machine_learning/trick_layers/tricks/%E7%9F%A5%E8%AF%86%E8%92%B8%E9%A6%8FKnowledge%20Distillation.html","/404.html","/posts/machine_learning/","/posts/","/zh/posts/","/posts/machine_learning/CV/","/posts/machine_learning/Bayesian/","/posts/machine_learning/EBM/","/posts/machine_learning/diffusers/","/posts/machine_learning/mathematics/","/posts/machine_learning/papers%20read/","/posts/machine_learning/reinforcement%20learning/","/posts/machine_learning/CV/DETR/","/posts/machine_learning/CV/JEPA/","/posts/machine_learning/reinforcement%20learning/actor-critic/","/posts/machine_learning/trick_layers/Attention/","/posts/machine_learning/trick_layers/","/posts/machine_learning/trick_layers/transformers/","/posts/machine_learning/trick_layers/tricks/","/category/","/category/machine-learning/","/zh/category/","/tag/","/tag/machine-learning/","/tag/cv/","/tag/bayesian/","/tag/ebm/","/tag/diffusers/","/tag/mathematics/","/tag/papers-read/","/tag/reinforcement-learning/","/tag/detr/","/tag/jepa/","/tag/actor-critic/","/tag/attention/","/tag/transformers/","/tag/tricks/","/zh/tag/","/article/","/zh/article/","/star/","/zh/star/","/timeline/","/zh/timeline/"],Ae="SLIMSEARCH_QUERY_HISTORY",y=T(Ae,[]),Be=()=>{const{queryHistoryCount:i}=k;return{enabled:i>0,queryHistories:y,addQueryHistory:o=>{y.value=Array.from(new Set([o,...y.value.slice(0,i-1)]))},removeQueryHistory:o=>{y.value=[...y.value.slice(0,o),...y.value.slice(o+1)]}}},L=i=>fe[i.id]+("anchor"in i?`#${i.anchor}`:""),ke="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:z}=k,_=T(ke,[]),Ce=()=>({enabled:z>0,resultHistories:_,addResultHistory:l=>{{const o={link:L(l),display:l.display};"header"in l&&(o.header=l.header),_.value=[o,..._.value.slice(0,z-1)]}},removeResultHistory:l=>{_.value=[..._.value.slice(0,l),..._.value.slice(l+1)]}}),He=i=>{const{page:l,routeLocale:o}=he(),C=ue(),n=S(0),E=B(()=>n.value>0),h=pe([]);return de(()=>{const{search:H,terminate:d}=ge(),f=ye(g=>{const{resultsFilter:b=t=>t,querySplitter:v,suggestionsFilter:x,...r}=C.value;g?(n.value+=1,H(g,o.value,r).then(t=>b(t,g,o.value,l.value)).then(t=>{n.value-=1,h.value=t}).catch(t=>{console.warn(t),n.value-=1,n.value||(h.value=[])})):h.value=[]},k.searchDelay-k.suggestDelay,{maxWait:5e3});ve([i,o],([g])=>f(g.join(" "))),_e(()=>{d()})}),{isSearching:E,results:h}};var we=N({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(i,{emit:l}){const o=Y(),C=X(),n=Z(ee),{addQueryHistory:E,queryHistories:h,removeQueryHistory:H}=Be(),{resultHistories:d,addResultHistory:f,removeResultHistory:g}=Ce(),b=ae(i,"queries"),{results:v,isSearching:x}=He(b),r=se({isQuery:!0,index:0}),t=S(0),u=S(0),M=B(()=>h.value.length>0||d.value.length>0),w=B(()=>v.value.length>0),D=B(()=>v.value[t.value]||null),I=()=>{const{isQuery:a,index:s}=r;s===0?(r.isQuery=!a,r.index=a?d.value.length-1:h.value.length-1):r.index=s-1},P=()=>{const{isQuery:a,index:s}=r;s===(a?h.value.length-1:d.value.length-1)?(r.isQuery=!a,r.index=0):r.index=s+1},$=()=>{t.value=t.value>0?t.value-1:v.value.length-1,u.value=D.value.contents.length-1},j=()=>{t.value=t.value<v.value.length-1?t.value+1:0,u.value=0},U=()=>{u.value<D.value.contents.length-1?u.value+=1:j()},G=()=>{u.value>0?u.value-=1:$()},R=a=>a.map(s=>Ee(s)?s:e(s[0],s[1])),J=a=>{if(a.type==="customField"){const s=ce[a.index]||"$content",[p,c=""]=me(s)?s[C.value].split("$content"):s.split("$content");return a.display.map(m=>e("div",R([p,...m,c])))}return a.display.map(s=>e("div",R(s)))},A=()=>{t.value=0,u.value=0,l("updateQuery",""),l("close")},K=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},n.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},h.value.map((a,s)=>{const p=r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p,onClick:()=>{l("updateQuery",a)}},e("div",[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},a),e("button",{type:"button",class:"slimsearch-remove-icon",title:n.value.remove,"aria-label":n.value.remove,innerHTML:V,onClick:c=>{c.preventDefault(),c.stopPropagation(),H(s)}})]))}))])),O=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},n.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},d.value.map((a,s)=>{const p=!r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:p}],role:"option","aria-selected":p},e(q,{to:a.link,onClick:()=>{A()}},()=>[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[a.header?e("div",{class:"slimsearch-record-content-header"},a.header):null,e("div",a.display.map(c=>R(c)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:n.value.remove,"aria-label":n.value.remove,innerHTML:V,onClick:c=>{c.preventDefault(),c.stopPropagation(),g(s)}})]))}))]));return te("keydown",a=>{if(i.isFocusing){if(w.value){if(a.key==="ArrowUp")G();else if(a.key==="ArrowDown")U();else if(a.key==="Enter"){const s=D.value.contents[u.value];E(i.queries.join(" ")),f(s),o.push(L(s)),A()}}else if(a.key==="ArrowUp")I();else if(a.key==="ArrowDown")P();else if(a.key==="Enter"){const{index:s}=r;r.isQuery?(a.preventDefault(),l("updateQuery",h.value[s])):(o.push(d.value[s].link),A())}}}),ie([t,u],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:i.queries.length?!w.value:!M.value}]},i.queries.length?x.value?e(ne,{hint:n.value.searching}):w.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},v.value.map(({title:a,contents:s},p)=>{const c=t.value===p;return e("div",{class:["slimsearch-record",{active:c}],role:"group","aria-selected":c},[e("div",{class:"slimsearch-record-title"},a||n.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},s.map((m,W)=>{const Q=c&&u.value===W;return e("li",{class:["slimsearch-record-matches",{active:Q}],role:"option","aria-selected":Q},e(q,{to:L(m),onClick:()=>{E(i.queries.join(" ")),f(m),A()}},()=>[m.type==="text"?null:e(m.type==="title"?re:m.type==="heading"?le:oe,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[m.type==="text"&&m.header?e("div",{class:"slimsearch-record-content-header"},m.header):null,e("div",J(m))])]))}))])})):n.value.emptyResult:M.value?[K(),O()]:n.value.emptyHistory)}});export{we as default};
